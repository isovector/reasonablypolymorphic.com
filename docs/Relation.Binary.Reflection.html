<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Relation.Binary.Reflection</title><link rel="stylesheet" href="/css/agda-cats.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Helpers intended to ease the development of &quot;tactics&quot; which use</a>
<a id="173" class="Comment">-- proof by reflection</a>
<a id="196" class="Comment">------------------------------------------------------------------------</a>

<a id="270" class="Symbol">{-#</a> <a id="274" class="Keyword">OPTIONS</a> <a id="282" class="Pragma">--cubical-compatible</a> <a id="303" class="Pragma">--safe</a> <a id="310" class="Symbol">#-}</a>

<a id="315" class="Keyword">open</a> <a id="320" class="Keyword">import</a> <a id="327" href="Data.Fin.Base.html" class="Module">Data.Fin.Base</a>
<a id="341" class="Keyword">open</a> <a id="346" class="Keyword">import</a> <a id="353" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="367" class="Keyword">open</a> <a id="372" class="Keyword">import</a> <a id="379" href="Data.Vec.Base.html" class="Module">Data.Vec.Base</a> <a id="393" class="Symbol">as</a> <a id="396" class="Module">Vec</a>
<a id="400" class="Keyword">open</a> <a id="405" class="Keyword">import</a> <a id="412" href="Function.Base.html" class="Module">Function.Base</a>
<a id="426" class="Keyword">open</a> <a id="431" class="Keyword">import</a> <a id="438" href="Function.Equality.html" class="Module">Function.Equality</a> <a id="456" class="Keyword">using</a> <a id="462" class="Symbol">(</a><a id="463" href="Function.Equality.html#1073" class="Field Operator">_⟨$⟩_</a><a id="468" class="Symbol">)</a>
<a id="470" class="Keyword">open</a> <a id="475" class="Keyword">import</a> <a id="482" href="Function.Equivalence.html" class="Module">Function.Equivalence</a> <a id="503" class="Keyword">using</a> <a id="509" class="Symbol">(</a><a id="510" class="Keyword">module</a> <a id="517" href="Function.Equivalence.html#838" class="Module">Equivalence</a><a id="528" class="Symbol">)</a>
<a id="530" class="Keyword">open</a> <a id="535" class="Keyword">import</a> <a id="542" href="Level.html" class="Module">Level</a>
<a id="548" class="Keyword">open</a> <a id="553" class="Keyword">import</a> <a id="560" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="576" class="Keyword">import</a> <a id="583" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="621" class="Symbol">as</a> <a id="624" class="Module">P</a>

<a id="627" class="Comment">-- Think of the parameters as follows:</a>
<a id="666" class="Comment">--</a>
<a id="669" class="Comment">-- * Expr:    A representation of code.</a>
<a id="709" class="Comment">-- * var:     The Expr type should support a notion of variables.</a>
<a id="775" class="Comment">-- * ⟦_⟧:     Computes the semantics of an expression. Takes an</a>
<a id="839" class="Comment">--            environment mapping variables to something.</a>
<a id="897" class="Comment">-- * ⟦_⇓⟧:    Computes the semantics of the normal form of the</a>
<a id="960" class="Comment">--            expression.</a>
<a id="986" class="Comment">-- * correct: Normalisation preserves the semantics.</a>
<a id="1039" class="Comment">--</a>
<a id="1042" class="Comment">-- Given these parameters two &quot;tactics&quot; are returned, prove and solve.</a>
<a id="1113" class="Comment">--</a>
<a id="1116" class="Comment">-- For an example of the use of this module, see Algebra.RingSolver.</a>

<a id="1186" class="Keyword">module</a> <a id="1193" href="Relation.Binary.Reflection.html" class="Module">Relation.Binary.Reflection</a>
         <a id="1229" class="Symbol">{</a><a id="1230" href="Relation.Binary.Reflection.html#1230" class="Bound">e</a> <a id="1232" href="Relation.Binary.Reflection.html#1232" class="Bound">a</a> <a id="1234" href="Relation.Binary.Reflection.html#1234" class="Bound">s</a><a id="1235" class="Symbol">}</a>
         <a id="1246" class="Symbol">{</a><a id="1247" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="1252" class="Symbol">:</a> <a data-type="Set" id="1254" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1256" class="Symbol">→</a> <a data-type="Set₁" id="1258" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1262" href="Relation.Binary.Reflection.html#1230" class="Bound">e</a><a id="1263" class="Symbol">}</a> <a id="1265" class="Symbol">{</a><a id="1266" href="Relation.Binary.Reflection.html#1266" class="Bound">A</a> <a id="1268" class="Symbol">:</a> <a data-type="Set₁" id="1270" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1274" href="Relation.Binary.Reflection.html#1232" class="Bound">a</a><a id="1275" class="Symbol">}</a>
         <a id="1286" class="Symbol">(</a><a id="1287" href="Relation.Binary.Reflection.html#1287" class="Bound">Sem</a> <a id="1291" class="Symbol">:</a> <a id="1293" href="Relation.Binary.Bundles.html#1018" class="Record">Setoid</a> <a id="1300" href="Relation.Binary.Reflection.html#1232" class="Bound">a</a> <a id="1302" href="Relation.Binary.Reflection.html#1234" class="Bound">s</a><a id="1303" class="Symbol">)</a>
         <a id="1314" class="Symbol">(</a><a id="1315" href="Relation.Binary.Reflection.html#1315" class="Bound">var</a> <a id="1319" class="Symbol">:</a> <a id="1321" class="Symbol">∀</a> <a id="1323" class="Symbol">{</a><a id="1324" href="Relation.Binary.Reflection.html#1324" class="Bound">n</a><a id="1325" class="Symbol">}</a> <a id="1327" class="Symbol">→</a> <a id="1329" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="1333" href="Relation.Binary.Reflection.html#1324" class="Bound">n</a> <a id="1335" class="Symbol">→</a> <a id="1337" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="1342" href="Relation.Binary.Reflection.html#1324" class="Bound">n</a><a id="1343" class="Symbol">)</a>
         <a id="1354" class="Symbol">(</a><a id="1355" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟦_⟧</a> <a id="1359" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⟦_⇓⟧</a> <a id="1364" class="Symbol">:</a> <a id="1366" class="Symbol">∀</a> <a id="1368" class="Symbol">{</a><a id="1369" href="Relation.Binary.Reflection.html#1369" class="Bound">n</a><a id="1370" class="Symbol">}</a> <a id="1372" class="Symbol">→</a> <a id="1374" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="1379" href="Relation.Binary.Reflection.html#1369" class="Bound">n</a> <a id="1381" class="Symbol">→</a> <a id="1383" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1387" href="Relation.Binary.Reflection.html#1266" class="Bound">A</a> <a id="1389" href="Relation.Binary.Reflection.html#1369" class="Bound">n</a> <a id="1391" class="Symbol">→</a> <a id="1393" href="Relation.Binary.Bundles.html#1081" class="Field">Setoid.Carrier</a> <a id="1408" href="Relation.Binary.Reflection.html#1287" class="Bound">Sem</a><a id="1411" class="Symbol">)</a>
         <a id="1422" class="Symbol">(</a><a id="1423" href="Relation.Binary.Reflection.html#1423" class="Bound">correct</a> <a id="1431" class="Symbol">:</a> <a id="1433" class="Symbol">∀</a> <a id="1435" class="Symbol">{</a><a id="1436" href="Relation.Binary.Reflection.html#1436" class="Bound">n</a><a id="1437" class="Symbol">}</a> <a id="1439" class="Symbol">(</a><a id="1440" href="Relation.Binary.Reflection.html#1440" class="Bound">e</a> <a id="1442" class="Symbol">:</a> <a id="1444" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="1449" href="Relation.Binary.Reflection.html#1436" class="Bound">n</a><a id="1450" class="Symbol">)</a> <a id="1452" href="Relation.Binary.Reflection.html#1452" class="Bound">ρ</a> <a id="1454" class="Symbol">→</a>
                    <a id="1476" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⟦</a> <a id="1478" href="Relation.Binary.Reflection.html#1440" class="Bound">e</a> <a id="1480" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⇓⟧</a> <a id="1483" href="Relation.Binary.Reflection.html#1452" class="Bound">ρ</a> <a id="1485" href="Function.Base.html#4407" class="Function Operator">⟨</a> <a id="1487" href="Relation.Binary.Bundles.html#1107" class="Field Operator">Setoid._≈_</a> <a id="1498" href="Relation.Binary.Reflection.html#1287" class="Bound">Sem</a> <a id="1502" href="Function.Base.html#4407" class="Function Operator">⟩</a> <a id="1504" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟦</a> <a id="1506" href="Relation.Binary.Reflection.html#1440" class="Bound">e</a> <a id="1508" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟧</a> <a id="1510" href="Relation.Binary.Reflection.html#1452" class="Bound">ρ</a><a id="1511" class="Symbol">)</a>
         <a id="1522" class="Keyword">where</a>

<a id="1529" class="Keyword">open</a> <a id="1534" class="Keyword">import</a> <a id="1541" href="Data.Vec.N-ary.html" class="Module">Data.Vec.N-ary</a>
<a id="1556" class="Keyword">open</a> <a id="1561" class="Keyword">import</a> <a id="1568" href="Data.Product.html" class="Module">Data.Product</a>
<a id="1581" class="Keyword">import</a> <a id="1588" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a> <a id="1621" class="Symbol">as</a> <a id="1624" class="Module">Eq</a>

<a id="1628" class="Keyword">open</a> <a id="1633" href="Relation.Binary.Bundles.html#1018" class="Module">Setoid</a> <a id="1640" href="Relation.Binary.Reflection.html#1287" class="Bound">Sem</a>
<a id="1644" class="Keyword">open</a> <a id="1649" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Eq</a> <a id="1652" href="Relation.Binary.Reflection.html#1287" class="Bound">Sem</a>

<a id="1657" class="Comment">-- If two normalised expressions are semantically equal, then their</a>
<a id="1725" class="Comment">-- non-normalised forms are also equal.</a>

<a id="prove"></a><a id="1766" href="Relation.Binary.Reflection.html#1766" class="Function">prove</a> <a id="1772" class="Symbol">:</a> <a id="1774" class="Symbol">∀</a> <a id="1776" class="Symbol">{</a><a id="1777" href="Relation.Binary.Reflection.html#1777" class="Bound">n</a><a id="1778" class="Symbol">}</a> <a id="1780" class="Symbol">(</a><a id="1781" href="Relation.Binary.Reflection.html#1781" class="Bound">ρ</a> <a id="1783" class="Symbol">:</a> <a id="1785" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1789" href="Relation.Binary.Reflection.html#1266" class="Bound">A</a> <a id="1791" href="Relation.Binary.Reflection.html#1777" class="Bound">n</a><a id="1792" class="Symbol">)</a> <a id="1794" href="Relation.Binary.Reflection.html#1794" class="Bound">e₁</a> <a id="1797" href="Relation.Binary.Reflection.html#1797" class="Bound">e₂</a> <a id="1800" class="Symbol">→</a>
        <a id="1810" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⟦</a> <a id="1812" href="Relation.Binary.Reflection.html#1794" class="Bound">e₁</a> <a id="1815" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⇓⟧</a> <a id="1818" href="Relation.Binary.Reflection.html#1781" class="Bound">ρ</a> <a id="1820" href="Relation.Binary.Bundles.html#1107" class="Function Operator">≈</a> <a id="1822" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⟦</a> <a id="1824" href="Relation.Binary.Reflection.html#1797" class="Bound">e₂</a> <a id="1827" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⇓⟧</a> <a id="1830" href="Relation.Binary.Reflection.html#1781" class="Bound">ρ</a> <a id="1832" class="Symbol">→</a>
        <a id="1842" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟦</a> <a id="1844" href="Relation.Binary.Reflection.html#1794" class="Bound">e₁</a>  <a id="1848" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟧</a> <a id="1850" href="Relation.Binary.Reflection.html#1781" class="Bound">ρ</a> <a id="1852" href="Relation.Binary.Bundles.html#1107" class="Function Operator">≈</a> <a id="1854" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟦</a> <a id="1856" href="Relation.Binary.Reflection.html#1797" class="Bound">e₂</a>  <a id="1860" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟧</a> <a id="1862" href="Relation.Binary.Reflection.html#1781" class="Bound">ρ</a>
<a id="1864" href="Relation.Binary.Reflection.html#1766" class="Function">prove</a> <a id="1870" href="Relation.Binary.Reflection.html#1870" class="Bound">ρ</a> <a id="1872" href="Relation.Binary.Reflection.html#1872" class="Bound">e₁</a> <a id="1875" href="Relation.Binary.Reflection.html#1875" class="Bound">e₂</a> <a id="1878" href="Relation.Binary.Reflection.html#1878" class="Bound">hyp</a> <a id="1882" class="Symbol">=</a> <a id="1884" href="Relation.Binary.Reasoning.Base.Single.html#1925" class="Function Operator">begin</a>
  <a id="1892" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟦</a> <a id="1894" href="Relation.Binary.Reflection.html#1872" class="Bound">e₁</a>  <a id="1898" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟧</a> <a id="1900" href="Relation.Binary.Reflection.html#1870" class="Bound">ρ</a> <a id="1902" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">≈⟨</a> <a id="1905" href="Relation.Binary.Structures.html#1603" class="Function">sym</a> <a id="1909" class="Symbol">(</a><a id="1910" href="Relation.Binary.Reflection.html#1423" class="Bound">correct</a> <a id="1918" href="Relation.Binary.Reflection.html#1872" class="Bound">e₁</a> <a id="1921" href="Relation.Binary.Reflection.html#1870" class="Bound">ρ</a><a id="1922" class="Symbol">)</a> <a id="1924" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">⟩</a>
  <a id="1928" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⟦</a> <a id="1930" href="Relation.Binary.Reflection.html#1872" class="Bound">e₁</a> <a id="1933" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⇓⟧</a> <a id="1936" href="Relation.Binary.Reflection.html#1870" class="Bound">ρ</a> <a id="1938" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">≈⟨</a> <a id="1941" href="Relation.Binary.Reflection.html#1878" class="Bound">hyp</a> <a id="1945" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">⟩</a>
  <a id="1949" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⟦</a> <a id="1951" href="Relation.Binary.Reflection.html#1875" class="Bound">e₂</a> <a id="1954" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⇓⟧</a> <a id="1957" href="Relation.Binary.Reflection.html#1870" class="Bound">ρ</a> <a id="1959" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">≈⟨</a> <a id="1962" href="Relation.Binary.Reflection.html#1423" class="Bound">correct</a> <a id="1970" href="Relation.Binary.Reflection.html#1875" class="Bound">e₂</a> <a id="1973" href="Relation.Binary.Reflection.html#1870" class="Bound">ρ</a> <a id="1975" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">⟩</a>
  <a id="1979" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟦</a> <a id="1981" href="Relation.Binary.Reflection.html#1875" class="Bound">e₂</a>  <a id="1985" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟧</a> <a id="1987" href="Relation.Binary.Reflection.html#1870" class="Bound">ρ</a> <a id="1989" href="Relation.Binary.Reasoning.Base.Single.html#2564" class="Function Operator">∎</a>

<a id="1992" class="Comment">-- Applies the function to all possible &quot;variables&quot;.</a>

<a id="close"></a><a id="2046" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="2052" class="Symbol">:</a> <a id="2054" class="Symbol">∀</a> <a id="2056" class="Symbol">{</a><a id="2057" href="Relation.Binary.Reflection.html#2057" class="Bound">A</a> <a id="2059" class="Symbol">:</a> <a data-type="Set₁" id="2061" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2065" href="Relation.Binary.Reflection.html#1230" class="Bound">e</a><a id="2066" class="Symbol">}</a> <a id="2068" href="Relation.Binary.Reflection.html#2068" class="Bound">n</a> <a id="2070" class="Symbol">→</a> <a id="2072" href="Data.Vec.N-ary.html#973" class="Function">N-ary</a> <a id="2078" href="Relation.Binary.Reflection.html#2068" class="Bound">n</a> <a id="2080" class="Symbol">(</a><a id="2081" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="2086" href="Relation.Binary.Reflection.html#2068" class="Bound">n</a><a id="2087" class="Symbol">)</a> <a id="2089" href="Relation.Binary.Reflection.html#2057" class="Bound">A</a> <a id="2091" class="Symbol">→</a> <a id="2093" href="Relation.Binary.Reflection.html#2057" class="Bound">A</a>
<a id="2095" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="2101" href="Relation.Binary.Reflection.html#2101" class="Bound">n</a> <a id="2103" href="Relation.Binary.Reflection.html#2103" class="Bound">f</a> <a id="2105" class="Symbol">=</a> <a id="2107" href="Relation.Binary.Reflection.html#2103" class="Bound">f</a> <a id="2109" href="Data.Vec.N-ary.html#1306" class="Function Operator">$ⁿ</a> <a id="2112" href="Data.Vec.Base.html#2589" class="Function">Vec.map</a> <a id="2120" href="Relation.Binary.Reflection.html#1315" class="Bound">var</a> <a id="2124" class="Symbol">(</a><a id="2125" href="Data.Vec.Base.html#6020" class="Function">allFin</a> <a id="2132" href="Relation.Binary.Reflection.html#2101" class="Bound">n</a><a id="2133" class="Symbol">)</a>

<a id="2136" class="Comment">-- A variant of prove which should in many cases be easier to use,</a>
<a id="2203" class="Comment">-- because variables and environments are handled in a less explicit</a>
<a id="2272" class="Comment">-- way.</a>
<a id="2280" class="Comment">--</a>
<a id="2283" class="Comment">-- If the type signature of solve is a bit daunting, then it may be</a>
<a id="2351" class="Comment">-- helpful to instantiate n with a small natural number and normalise</a>
<a id="2421" class="Comment">-- the remainder of the type.</a>

<a id="solve"></a><a id="2452" href="Relation.Binary.Reflection.html#2452" class="Function">solve</a> <a id="2458" class="Symbol">:</a> <a id="2460" class="Symbol">∀</a> <a id="2462" href="Relation.Binary.Reflection.html#2462" class="Bound">n</a> <a id="2464" class="Symbol">(</a><a id="2465" href="Relation.Binary.Reflection.html#2465" class="Bound">f</a> <a id="2467" class="Symbol">:</a> <a id="2469" href="Data.Vec.N-ary.html#973" class="Function">N-ary</a> <a id="2475" href="Relation.Binary.Reflection.html#2462" class="Bound">n</a> <a id="2477" class="Symbol">(</a><a id="2478" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="2483" href="Relation.Binary.Reflection.html#2462" class="Bound">n</a><a id="2484" class="Symbol">)</a> <a id="2486" class="Symbol">(</a><a id="2487" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="2492" href="Relation.Binary.Reflection.html#2462" class="Bound">n</a> <a id="2494" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2496" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="2501" href="Relation.Binary.Reflection.html#2462" class="Bound">n</a><a id="2502" class="Symbol">))</a> <a id="2505" class="Symbol">→</a>
  <a id="2509" href="Data.Vec.N-ary.html#2316" class="Function">Eqʰ</a> <a id="2513" href="Relation.Binary.Reflection.html#2462" class="Bound">n</a> <a id="2515" href="Relation.Binary.Bundles.html#1107" class="Function Operator">_≈_</a> <a id="2519" class="Symbol">(</a><a id="2520" href="Data.Vec.N-ary.html#1184" class="Function">curryⁿ</a> <a id="2527" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⟦</a> <a data-type="Agda.Builtin.Sigma.Σ A B → A" id="2529" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="2535" class="Symbol">(</a><a id="2536" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="2542" href="Relation.Binary.Reflection.html#2462" class="Bound">n</a> <a id="2544" href="Relation.Binary.Reflection.html#2465" class="Bound">f</a><a id="2545" class="Symbol">)</a> <a id="2547" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⇓⟧</a><a id="2549" class="Symbol">)</a> <a id="2551" class="Symbol">(</a><a id="2552" href="Data.Vec.N-ary.html#1184" class="Function">curryⁿ</a> <a id="2559" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⟦</a> <a data-type="(r : Agda.Builtin.Sigma.Σ A B) → B (Agda.Builtin.Sigma.fst r)" id="2561" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="2567" class="Symbol">(</a><a id="2568" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="2574" href="Relation.Binary.Reflection.html#2462" class="Bound">n</a> <a id="2576" href="Relation.Binary.Reflection.html#2465" class="Bound">f</a><a id="2577" class="Symbol">)</a> <a id="2579" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⇓⟧</a><a id="2581" class="Symbol">)</a> <a id="2583" class="Symbol">→</a>
  <a id="2587" href="Data.Vec.N-ary.html#2072" class="Function">Eq</a>  <a id="2591" href="Relation.Binary.Reflection.html#2462" class="Bound">n</a> <a id="2593" href="Relation.Binary.Bundles.html#1107" class="Function Operator">_≈_</a> <a id="2597" class="Symbol">(</a><a id="2598" href="Data.Vec.N-ary.html#1184" class="Function">curryⁿ</a> <a id="2605" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟦</a> <a data-type="Agda.Builtin.Sigma.Σ A B → A" id="2607" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="2613" class="Symbol">(</a><a id="2614" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="2620" href="Relation.Binary.Reflection.html#2462" class="Bound">n</a> <a id="2622" href="Relation.Binary.Reflection.html#2465" class="Bound">f</a><a id="2623" class="Symbol">)</a>  <a id="2626" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟧</a><a id="2627" class="Symbol">)</a> <a id="2629" class="Symbol">(</a><a id="2630" href="Data.Vec.N-ary.html#1184" class="Function">curryⁿ</a> <a id="2637" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟦</a> <a data-type="(r : Agda.Builtin.Sigma.Σ A B) → B (Agda.Builtin.Sigma.fst r)" id="2639" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="2645" class="Symbol">(</a><a id="2646" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="2652" href="Relation.Binary.Reflection.html#2462" class="Bound">n</a> <a id="2654" href="Relation.Binary.Reflection.html#2465" class="Bound">f</a><a id="2655" class="Symbol">)</a>  <a id="2658" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟧</a><a id="2659" class="Symbol">)</a>
<a id="2661" href="Relation.Binary.Reflection.html#2452" class="Function">solve</a> <a id="2667" href="Relation.Binary.Reflection.html#2667" class="Bound">n</a> <a id="2669" href="Relation.Binary.Reflection.html#2669" class="Bound">f</a> <a id="2671" href="Relation.Binary.Reflection.html#2671" class="Bound">hyp</a> <a id="2675" class="Symbol">=</a>
  <a id="2679" href="Data.Vec.N-ary.html#4073" class="Function">curryⁿ-cong</a> <a id="2691" href="Relation.Binary.Bundles.html#1107" class="Function Operator">_≈_</a> <a id="2695" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟦</a> <a data-type="Agda.Builtin.Sigma.Σ A B → A" id="2697" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="2703" class="Symbol">(</a><a id="2704" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="2710" href="Relation.Binary.Reflection.html#2667" class="Bound">n</a> <a id="2712" href="Relation.Binary.Reflection.html#2669" class="Bound">f</a><a id="2713" class="Symbol">)</a> <a id="2715" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟧</a> <a id="2717" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟦</a> <a data-type="(r : Agda.Builtin.Sigma.Σ A B) → B (Agda.Builtin.Sigma.fst r)" id="2719" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="2725" class="Symbol">(</a><a id="2726" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="2732" href="Relation.Binary.Reflection.html#2667" class="Bound">n</a> <a id="2734" href="Relation.Binary.Reflection.html#2669" class="Bound">f</a><a id="2735" class="Symbol">)</a> <a id="2737" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟧</a>
    <a id="2743" class="Symbol">(λ</a> <a id="2746" href="Relation.Binary.Reflection.html#2746" class="Bound">ρ</a> <a id="2748" class="Symbol">→</a> <a id="2750" href="Relation.Binary.Reflection.html#1766" class="Function">prove</a> <a id="2756" href="Relation.Binary.Reflection.html#2746" class="Bound">ρ</a> <a id="2758" class="Symbol">(</a><a data-type="Agda.Builtin.Sigma.Σ A B → A" id="2759" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="2765" class="Symbol">(</a><a id="2766" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="2772" href="Relation.Binary.Reflection.html#2667" class="Bound">n</a> <a id="2774" href="Relation.Binary.Reflection.html#2669" class="Bound">f</a><a id="2775" class="Symbol">))</a> <a id="2778" class="Symbol">(</a><a data-type="(r : Agda.Builtin.Sigma.Σ A B) → B (Agda.Builtin.Sigma.fst r)" id="2779" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="2785" class="Symbol">(</a><a id="2786" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="2792" href="Relation.Binary.Reflection.html#2667" class="Bound">n</a> <a id="2794" href="Relation.Binary.Reflection.html#2669" class="Bound">f</a><a id="2795" class="Symbol">))</a>
             <a id="2811" class="Symbol">(</a><a id="2812" href="Data.Vec.N-ary.html#4367" class="Function">curryⁿ-cong⁻¹</a> <a id="2826" href="Relation.Binary.Bundles.html#1107" class="Function Operator">_≈_</a>
                <a id="2846" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⟦</a> <a data-type="Agda.Builtin.Sigma.Σ A B → A" id="2848" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="2854" class="Symbol">(</a><a id="2855" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="2861" href="Relation.Binary.Reflection.html#2667" class="Bound">n</a> <a id="2863" href="Relation.Binary.Reflection.html#2669" class="Bound">f</a><a id="2864" class="Symbol">)</a> <a id="2866" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⇓⟧</a> <a id="2869" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⟦</a> <a data-type="(r : Agda.Builtin.Sigma.Σ A B) → B (Agda.Builtin.Sigma.fst r)" id="2871" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="2877" class="Symbol">(</a><a id="2878" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="2884" href="Relation.Binary.Reflection.html#2667" class="Bound">n</a> <a id="2886" href="Relation.Binary.Reflection.html#2669" class="Bound">f</a><a id="2887" class="Symbol">)</a> <a id="2889" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⇓⟧</a>
                <a id="2908" class="Symbol">(</a><a id="2909" href="Data.Vec.N-ary.html#5392" class="Function">Eqʰ-to-Eq</a> <a id="2919" href="Relation.Binary.Reflection.html#2667" class="Bound">n</a> <a id="2921" href="Relation.Binary.Bundles.html#1107" class="Function Operator">_≈_</a> <a id="2925" href="Relation.Binary.Reflection.html#2671" class="Bound">hyp</a><a id="2928" class="Symbol">)</a> <a id="2930" href="Relation.Binary.Reflection.html#2746" class="Bound">ρ</a><a id="2931" class="Symbol">))</a>

<a id="2935" class="Comment">-- A variant of solve which does not require that the normal form</a>
<a id="3001" class="Comment">-- equality is proved for an arbitrary environment.</a>

<a id="solve₁"></a><a id="3054" href="Relation.Binary.Reflection.html#3054" class="Function">solve₁</a> <a id="3061" class="Symbol">:</a> <a id="3063" class="Symbol">∀</a> <a id="3065" href="Relation.Binary.Reflection.html#3065" class="Bound">n</a> <a id="3067" class="Symbol">(</a><a id="3068" href="Relation.Binary.Reflection.html#3068" class="Bound">f</a> <a id="3070" class="Symbol">:</a> <a id="3072" href="Data.Vec.N-ary.html#973" class="Function">N-ary</a> <a id="3078" href="Relation.Binary.Reflection.html#3065" class="Bound">n</a> <a id="3080" class="Symbol">(</a><a id="3081" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="3086" href="Relation.Binary.Reflection.html#3065" class="Bound">n</a><a id="3087" class="Symbol">)</a> <a id="3089" class="Symbol">(</a><a id="3090" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="3095" href="Relation.Binary.Reflection.html#3065" class="Bound">n</a> <a id="3097" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="3099" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="3104" href="Relation.Binary.Reflection.html#3065" class="Bound">n</a><a id="3105" class="Symbol">))</a> <a id="3108" class="Symbol">→</a>
         <a id="3119" href="Data.Vec.N-ary.html#1541" class="Function">∀ⁿ</a> <a id="3122" href="Relation.Binary.Reflection.html#3065" class="Bound">n</a> <a id="3124" class="Symbol">(</a><a id="3125" href="Data.Vec.N-ary.html#1184" class="Function">curryⁿ</a> <a id="3132" class="Symbol">λ</a> <a id="3134" href="Relation.Binary.Reflection.html#3134" class="Bound">ρ</a> <a id="3136" class="Symbol">→</a>
                 <a id="3155" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⟦</a> <a data-type="Agda.Builtin.Sigma.Σ A B → A" id="3157" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="3163" class="Symbol">(</a><a id="3164" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="3170" href="Relation.Binary.Reflection.html#3065" class="Bound">n</a> <a id="3172" href="Relation.Binary.Reflection.html#3068" class="Bound">f</a><a id="3173" class="Symbol">)</a> <a id="3175" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⇓⟧</a> <a id="3178" href="Relation.Binary.Reflection.html#3134" class="Bound">ρ</a> <a id="3180" href="Relation.Binary.Bundles.html#1107" class="Function Operator">≈</a> <a id="3182" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⟦</a> <a data-type="(r : Agda.Builtin.Sigma.Σ A B) → B (Agda.Builtin.Sigma.fst r)" id="3184" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="3190" class="Symbol">(</a><a id="3191" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="3197" href="Relation.Binary.Reflection.html#3065" class="Bound">n</a> <a id="3199" href="Relation.Binary.Reflection.html#3068" class="Bound">f</a><a id="3200" class="Symbol">)</a> <a id="3202" href="Relation.Binary.Reflection.html#1359" class="Bound Operator">⇓⟧</a> <a id="3205" href="Relation.Binary.Reflection.html#3134" class="Bound">ρ</a> <a id="3207" class="Symbol">→</a>
                 <a id="3226" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟦</a> <a data-type="Agda.Builtin.Sigma.Σ A B → A" id="3228" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="3234" class="Symbol">(</a><a id="3235" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="3241" href="Relation.Binary.Reflection.html#3065" class="Bound">n</a> <a id="3243" href="Relation.Binary.Reflection.html#3068" class="Bound">f</a><a id="3244" class="Symbol">)</a>  <a id="3247" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟧</a> <a id="3249" href="Relation.Binary.Reflection.html#3134" class="Bound">ρ</a> <a id="3251" href="Relation.Binary.Bundles.html#1107" class="Function Operator">≈</a> <a id="3253" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟦</a> <a data-type="(r : Agda.Builtin.Sigma.Σ A B) → B (Agda.Builtin.Sigma.fst r)" id="3255" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="3261" class="Symbol">(</a><a id="3262" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="3268" href="Relation.Binary.Reflection.html#3065" class="Bound">n</a> <a id="3270" href="Relation.Binary.Reflection.html#3068" class="Bound">f</a><a id="3271" class="Symbol">)</a>  <a id="3274" href="Relation.Binary.Reflection.html#1355" class="Bound Operator">⟧</a> <a id="3276" href="Relation.Binary.Reflection.html#3134" class="Bound">ρ</a><a id="3277" class="Symbol">)</a>
<a id="3279" href="Relation.Binary.Reflection.html#3054" class="Function">solve₁</a> <a id="3286" href="Relation.Binary.Reflection.html#3286" class="Bound">n</a> <a id="3288" href="Relation.Binary.Reflection.html#3288" class="Bound">f</a> <a id="3290" class="Symbol">=</a>
  <a id="3294" href="Function.Equivalence.html#1009" class="Field">Equivalence.from</a> <a id="3311" class="Symbol">(</a><a id="3312" href="Data.Vec.N-ary.html#3039" class="Function">uncurry-∀ⁿ</a> <a id="3323" href="Relation.Binary.Reflection.html#3286" class="Bound">n</a><a id="3324" class="Symbol">)</a> <a id="3326" href="Function.Equality.html#1073" class="Field Operator">⟨$⟩</a> <a id="3330" class="Symbol">λ</a> <a id="3332" href="Relation.Binary.Reflection.html#3332" class="Bound">ρ</a> <a id="3334" class="Symbol">→</a>
    <a id="3340" href="Relation.Binary.PropositionalEquality.Core.html#1789" class="Function">P.subst</a> <a id="3348" href="Function.Base.html#624" class="Function">id</a> <a id="3351" class="Symbol">(</a><a id="3352" href="Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">P.sym</a> <a id="3358" class="Symbol">(</a><a id="3359" href="Data.Vec.N-ary.html#2640" class="Function">left-inverse</a> <a id="3372" class="Symbol">(λ</a> <a id="3375" href="Relation.Binary.Reflection.html#3375" class="Bound">_</a> <a id="3377" class="Symbol">→</a> <a id="3379" class="Symbol">_</a> <a id="3381" href="Relation.Binary.Bundles.html#1107" class="Function Operator">≈</a> <a id="3383" class="Symbol">_</a> <a id="3385" class="Symbol">→</a> <a id="3387" class="Symbol">_</a> <a id="3389" href="Relation.Binary.Bundles.html#1107" class="Function Operator">≈</a> <a id="3391" class="Symbol">_)</a> <a id="3394" href="Relation.Binary.Reflection.html#3332" class="Bound">ρ</a><a id="3395" class="Symbol">))</a>
      <a id="3404" class="Symbol">(</a><a id="3405" href="Relation.Binary.Reflection.html#1766" class="Function">prove</a> <a id="3411" href="Relation.Binary.Reflection.html#3332" class="Bound">ρ</a> <a id="3413" class="Symbol">(</a><a data-type="Agda.Builtin.Sigma.Σ A B → A" id="3414" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="3420" class="Symbol">(</a><a id="3421" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="3427" href="Relation.Binary.Reflection.html#3286" class="Bound">n</a> <a id="3429" href="Relation.Binary.Reflection.html#3288" class="Bound">f</a><a id="3430" class="Symbol">))</a> <a id="3433" class="Symbol">(</a><a data-type="(r : Agda.Builtin.Sigma.Σ A B) → B (Agda.Builtin.Sigma.fst r)" id="3434" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="3440" class="Symbol">(</a><a id="3441" href="Relation.Binary.Reflection.html#2046" class="Function">close</a> <a id="3447" href="Relation.Binary.Reflection.html#3286" class="Bound">n</a> <a id="3449" href="Relation.Binary.Reflection.html#3288" class="Bound">f</a><a id="3450" class="Symbol">)))</a>

<a id="3455" class="Comment">-- A variant of _,_ which is intended to make uses of solve and solve₁</a>
<a id="3526" class="Comment">-- look a bit nicer.</a>

<a id="3548" class="Keyword">infix</a> <a id="3554" class="Number">4</a> <a id="3556" href="Relation.Binary.Reflection.html#3561" class="Function Operator">_⊜_</a>

<a id="_⊜_"></a><a id="3561" href="Relation.Binary.Reflection.html#3561" class="Function Operator">_⊜_</a> <a id="3565" class="Symbol">:</a> <a id="3567" class="Symbol">∀</a> <a id="3569" class="Symbol">{</a><a id="3570" href="Relation.Binary.Reflection.html#3570" class="Bound">n</a><a id="3571" class="Symbol">}</a> <a id="3573" class="Symbol">→</a> <a id="3575" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="3580" href="Relation.Binary.Reflection.html#3570" class="Bound">n</a> <a id="3582" class="Symbol">→</a> <a id="3584" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="3589" href="Relation.Binary.Reflection.html#3570" class="Bound">n</a> <a id="3591" class="Symbol">→</a> <a id="3593" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="3598" href="Relation.Binary.Reflection.html#3570" class="Bound">n</a> <a id="3600" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="3602" href="Relation.Binary.Reflection.html#1247" class="Bound">Expr</a> <a id="3607" href="Relation.Binary.Reflection.html#3570" class="Bound">n</a>
<a id="3609" href="Relation.Binary.Reflection.html#3561" class="Function Operator">_⊜_</a> <a id="3613" class="Symbol">=</a> <a data-type="(fst : A) (snd : B fst) → Agda.Builtin.Sigma.Σ A B" id="3615" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a>
</pre></body></html>