<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <base href="/"></base>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Review: A Very Elementary Introduction to Sheaves :: Reasonably Polymorphic</title>
        <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
        <link href="/atom.xml" rel="alternate" title="Reasonably Polymorphic - Atom" type="application/atom+xml" />
        <link href="/feed.rss" rel="alternate" title="Reasonably Polymorphic - RSS" type="application/rss+xml" />

        <link rel="stylesheet" href="/css/style.css" />
        <link rel="stylesheet" href="/css/katex.min.css" />
        <link rel="stylesheet" href="/css/agda-cats.css" />

        <script src="/equations.js"></script>
        <script src="/highlight-hover.js"></script>

  <noscript>
    <style>
      body span.reasoning-step .as-written {
        display: inline;
      }

      body span.reasoning-step .alternate {
        display: none;
      }
    </style>
  </noscript>

        </head>
        <body>
<div class="main">

<article>
<header>
  <h1><a href="/blog/sheafs/index.html#">Review: A Very Elementary Introduction to Sheaves</a></h1>
</header>
<p class="meta">
    <time>2022-02-27</time>

    <span class="tags">
        
    </span>
</p>
<div class="content">
    <pre class="Agda"><a id="179" class="Symbol">{-#</a> <a id="183" class="Keyword">OPTIONS</a> <a id="191" class="Pragma">--type-in-type</a> <a id="206" class="Symbol">#-}</a>

<a id="211" class="Keyword">module</a> <a id="218" href="blog/sheafs/index.html" class="Module">blog.sheafs</a> <a id="230" class="Keyword">where</a>

<a id="237" class="Keyword">open</a> <a id="242" class="Keyword">import</a> <a id="249" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="262" class="Keyword">hiding</a> <a id="269" class="Symbol">(</a><a id="270" href="Data.Integer.Base.html#2189" class="Datatype Operator">_&lt;_</a><a id="273" class="Symbol">)</a>
<a id="275" class="Keyword">open</a> <a id="280" class="Keyword">import</a> <a id="287" href="Data.Integer.Properties.html" class="Module">Data.Integer.Properties</a>
              <a id="325" class="Keyword">using</a> <a id="331" class="Symbol">(</a><a id="332" href="Data.Integer.Properties.html#43999" class="Function">*-zeroË¡</a><a id="339" class="Symbol">;</a> <a id="341" href="Data.Integer.Properties.html#2839" class="Function">â‰¤-reflexive</a><a id="352" class="Symbol">;</a> <a id="354" href="Data.Integer.Properties.html#3004" class="Function">â‰¤-trans</a><a id="361" class="Symbol">)</a>
<a id="363" class="Keyword">open</a> <a id="368" class="Keyword">import</a> <a id="375" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="384" class="Keyword">hiding</a> <a id="391" class="Symbol">(</a><a id="392" href="Data.Vec.Base.html#3807" class="Function">restrict</a><a id="400" class="Symbol">;</a> <a id="402" href="Data.Vec.Base.html#7774" class="Function">reverse</a><a id="409" class="Symbol">)</a>
<a id="411" class="Keyword">open</a> <a id="416" class="Keyword">import</a> <a id="423" href="Categories.html" class="Module">Categories</a>
<a id="434" class="Keyword">open</a> <a id="439" class="Keyword">import</a> <a id="446" href="Category.LIN.html" class="Module">Category.LIN</a>
<a id="459" class="Keyword">open</a> <a id="464" class="Keyword">import</a> <a id="471" href="Category.SET.html" class="Module">Category.SET</a>
<a id="484" class="Keyword">open</a> <a id="489" class="Keyword">import</a> <a id="496" href="Category.AGRP.html" class="Module">Category.AGRP</a>
<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Category.MyFunctor.html" class="Module">Category.MyFunctor</a>
<a id="541" class="Keyword">import</a> <a id="548" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="586" class="Symbol">as</a> <a id="589" class="Module">Eq</a>

<a id="593" class="Keyword">open</a> <a id="598" href="Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="601" class="Keyword">using</a> <a id="607" class="Symbol">(</a><a id="608" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_â‰¡_</a><a id="611" class="Symbol">;</a> <a id="613" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a><a id="617" class="Symbol">;</a> <a id="619" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="622" class="Symbol">;</a> <a id="624" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="628" class="Symbol">)</a>
<a id="630" class="Keyword">open</a> <a data-type="(m n : Nat) â†’ Set" id="635" href="Category.LIN.html#303" class="Module">LinMap</a>
</pre>
<p>A while back I reviewed some paper (maybe codata? â€” too lazy to check) and came away thinking â€œI should learn more about presheaves.â€ The first paper I found is <a href="https://arxiv.org/pdf/2202.01379.pdf">A Very Elementary Introduction to Sheaves</a> by Mark Agrios, and mildly interestingly, was published less than three weeks ago.</p>
<p>The paper is called â€œvery elementary,â€ and in the first sentence states it â€œis a very non-rigorous, loose, and extremely basic introduction to sheaves,â€ and it delivers on these promises. There is a section on metaphorically what a sheaf is, and then two somewhat-worked examples.</p>
<p>After reading through the paper, I feel like I have a very rough idea of what a sheaf is, and thought that this would be an excellent opportunity to flex my category theory muscles. That is, can I correctly generalize from these two examples to a solid category theoretical definition of a sheaf? Iâ€™m not sure, but this is a unique opportunity, so itâ€™s worth a shot.</p>
<h2 id="the-metaphor"><a href="#the-metaphor" class="header-link">The Metaphor<span class="header-link-emoji">ğŸ”—</span></a></h2>
<p>The central metaphor of the paper is that a sheaf enriches some mathematical structure, much like a garden enriches a plot of dirt. There are lots of gardens you could make on a plot of dirt, and then you can harvest things from them. I guess this makes sense to the author, but it doesnâ€™t particularly help me. I suspect this is an example of the monad tutorial fallacy in the wild: after thinking really hard about an idea for a while, the author came up with a metaphor that really works for them. But, this metaphor is more an artifact of their thinking process than it is descriptive of the idea itself. Anyway, either way, I wasnâ€™t able to extract much meaning here.</p>
<h2 id="example-graphs"><a href="#example-graphs" class="header-link">Example: Graphs<span class="header-link-emoji">ğŸ”—</span></a></h2>
<p>We can build a (pre-?)sheaf over a graph. By playing fast and loose with our types like mathematicians are so wont to do, we can model the edge <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>:</mo><msub><mi>V</mi><mi>i</mi></msub><mo>â†’</mo><msub><mi>V</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">e_{ij} : V_i \to V_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> in a graph as an â€œintersection of the nodes it connects.â€ The paper writes <span style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>&lt;</mo><msub><mi>v</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>v</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">e_{ij} &lt; v_i, v_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8252em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>.</span> Iâ€™m not super sure what that means, but I think itâ€™s saying that given some graph <span style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><mi>V</mi><mo separator="true">,</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G = (V, E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span>,</span> we can say <span style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>âŠ†</mo><msub><mi>v</mi><mi>i</mi></msub><mo>âˆª</mo><msub><mi>v</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">e_{ij} \subseteq v_i \cup v_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9221em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âŠ†</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆª</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>?</span> Except that this doesnâ€™t typecheck, since <code>v_i</code> is an element of a set, not a set itself. I donâ€™t know.</p>
<p>Anyway, the important thing here seems to be that there is a preorder between edges and vertices. So letâ€™s quickly define a <code>Preorder</code>:</p>
<pre class="Agda"><a id="3005" class="Keyword">record</a> <a id="Preorder"></a><a id="3012" href="blog/sheafs/index.html#3012" class="Record">Preorder</a> <a id="3021" class="Symbol">:</a> <a data-type="Setâ‚" id="3023" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="3027" class="Keyword">where</a>
  <a id="3035" class="Keyword">field</a>
    <a id="Preorder.Carrier"></a><a id="3045" href="blog/sheafs/index.html#3045" class="Field">Carrier</a> <a id="3053" class="Symbol">:</a> <a data-type="Setâ‚" id="3055" href="Agda.Primitive.html#326" class="Primitive">Set</a>
    <a id="Preorder._&lt;_"></a><a id="3063" href="blog/sheafs/index.html#3063" class="Field Operator">_&lt;_</a> <a id="3067" class="Symbol">:</a> <a id="3069" href="blog/sheafs/index.html#3045" class="Field">Carrier</a> <a id="3077" class="Symbol">â†’</a> <a id="3079" href="blog/sheafs/index.html#3045" class="Field">Carrier</a> <a id="3087" class="Symbol">â†’</a> <a data-type="Setâ‚" id="3089" href="Agda.Primitive.html#326" class="Primitive">Set</a>
    <a id="Preorder.&lt;-refl"></a><a id="3097" href="blog/sheafs/index.html#3097" class="Field">&lt;-refl</a> <a id="3104" class="Symbol">:</a> <a id="3106" class="Symbol">(</a><a id="3107" href="blog/sheafs/index.html#3107" class="Bound">a</a> <a id="3109" class="Symbol">:</a> <a id="3111" href="blog/sheafs/index.html#3045" class="Field">Carrier</a><a id="3118" class="Symbol">)</a> <a id="3120" class="Symbol">â†’</a> <a id="3122" href="blog/sheafs/index.html#3107" class="Bound">a</a> <a id="3124" href="blog/sheafs/index.html#3063" class="Field Operator">&lt;</a> <a id="3126" href="blog/sheafs/index.html#3107" class="Bound">a</a>
    <a id="Preorder.&lt;-trans"></a><a id="3132" href="blog/sheafs/index.html#3132" class="Field">&lt;-trans</a> <a id="3140" class="Symbol">:</a> <a id="3142" class="Symbol">{</a><a id="3143" href="blog/sheafs/index.html#3143" class="Bound">a</a> <a id="3145" href="blog/sheafs/index.html#3145" class="Bound">b</a> <a id="3147" href="blog/sheafs/index.html#3147" class="Bound">c</a> <a id="3149" class="Symbol">:</a> <a id="3151" href="blog/sheafs/index.html#3045" class="Field">Carrier</a><a id="3158" class="Symbol">}</a> <a id="3160" class="Symbol">â†’</a> <a id="3162" href="blog/sheafs/index.html#3143" class="Bound">a</a> <a id="3164" href="blog/sheafs/index.html#3063" class="Field Operator">&lt;</a> <a id="3166" href="blog/sheafs/index.html#3145" class="Bound">b</a> <a id="3168" class="Symbol">â†’</a> <a id="3170" href="blog/sheafs/index.html#3145" class="Bound">b</a> <a id="3172" href="blog/sheafs/index.html#3063" class="Field Operator">&lt;</a> <a id="3174" href="blog/sheafs/index.html#3147" class="Bound">c</a> <a id="3176" class="Symbol">â†’</a> <a id="3178" href="blog/sheafs/index.html#3143" class="Bound">a</a> <a id="3180" href="blog/sheafs/index.html#3063" class="Field Operator">&lt;</a> <a id="3182" href="blog/sheafs/index.html#3147" class="Bound">c</a>
</pre>
<p>and then just forget about the whole graph thing, because I am not convinced it is a meaningful presentation. Instead, weâ€™ll cheat, and just build exactly the object we want to discuss.</p>
<pre class="Agda"><a id="3380" class="Keyword">data</a> <a id="Ex"></a><a id="3385" href="blog/sheafs/index.html#3385" class="Datatype">Ex</a> <a id="3388" class="Symbol">:</a> <a data-type="Setâ‚" id="3390" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="3394" class="Keyword">where</a>
  <a id="Ex.v1"></a><a id="3402" href="blog/sheafs/index.html#3402" class="InductiveConstructor">v1</a>  <a id="3406" class="Symbol">:</a> <a id="3408" href="blog/sheafs/index.html#3385" class="Datatype">Ex</a>
  <a id="Ex.v2"></a><a id="3413" href="blog/sheafs/index.html#3413" class="InductiveConstructor">v2</a>  <a id="3417" class="Symbol">:</a> <a id="3419" href="blog/sheafs/index.html#3385" class="Datatype">Ex</a>
  <a id="Ex.e12"></a><a id="3424" href="blog/sheafs/index.html#3424" class="InductiveConstructor">e12</a> <a id="3428" class="Symbol">:</a> <a id="3430" href="blog/sheafs/index.html#3385" class="Datatype">Ex</a>
</pre>
<p>corresponding to this rather boring graph:</p>
<div class="diagram-container">
<img src="8166794173b950645ad7163ff8e67e41a056e9f6.svg" title="commutative diagram" class="diagram quiver" />
</div>
<p>We can then build a <span class="Agda"><a href="blog/sheafs/index.html#3012" class="Record">Preorder</a></span> on <span class="Agda"><a href="blog/sheafs/index.html#3385" class="Datatype">Ex</a></span> with explicit cases for <span class="Agda"><a href="blog/sheafs/index.html#3424" class="InductiveConstructor">e12</a></span> being less than its vertices:</p>
<pre class="Agda"><a id="3709" class="Keyword">data</a> <a id="Ex&lt;"></a><a id="3714" href="blog/sheafs/index.html#3714" class="Datatype">Ex&lt;</a> <a id="3718" class="Symbol">:</a> <a id="3720" href="blog/sheafs/index.html#3385" class="Datatype">Ex</a> <a id="3723" class="Symbol">â†’</a> <a id="3725" href="blog/sheafs/index.html#3385" class="Datatype">Ex</a> <a id="3728" class="Symbol">â†’</a> <a data-type="Setâ‚" id="3730" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="3734" class="Keyword">where</a>
  <a id="Ex&lt;.e12&lt;v1"></a><a id="3742" href="blog/sheafs/index.html#3742" class="InductiveConstructor">e12&lt;v1</a> <a id="3749" class="Symbol">:</a> <a id="3751" href="blog/sheafs/index.html#3714" class="Datatype">Ex&lt;</a> <a id="3755" href="blog/sheafs/index.html#3424" class="InductiveConstructor">e12</a> <a id="3759" href="blog/sheafs/index.html#3402" class="InductiveConstructor">v1</a>
  <a id="Ex&lt;.e12&lt;v2"></a><a id="3764" href="blog/sheafs/index.html#3764" class="InductiveConstructor">e12&lt;v2</a> <a id="3771" class="Symbol">:</a> <a id="3773" href="blog/sheafs/index.html#3714" class="Datatype">Ex&lt;</a> <a id="3777" href="blog/sheafs/index.html#3424" class="InductiveConstructor">e12</a> <a id="3781" href="blog/sheafs/index.html#3413" class="InductiveConstructor">v2</a>
</pre>
<p>and two cases to satisfy the preorder laws:</p>
<pre class="Agda">  <a id="Ex&lt;.ex&lt;-refl"></a><a id="3840" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="3849" class="Symbol">:</a> <a id="3851" class="Symbol">(</a><a id="3852" href="blog/sheafs/index.html#3852" class="Bound">x</a> <a id="3854" class="Symbol">:</a> <a id="3856" href="blog/sheafs/index.html#3385" class="Datatype">Ex</a><a id="3858" class="Symbol">)</a> <a id="3860" class="Symbol">â†’</a> <a id="3862" href="blog/sheafs/index.html#3714" class="Datatype">Ex&lt;</a> <a id="3866" href="blog/sheafs/index.html#3852" class="Bound">x</a> <a id="3868" href="blog/sheafs/index.html#3852" class="Bound">x</a>
</pre>
<p>and then mechanically hook everything up:</p>
<pre class="Agda"><a id="3922" class="Keyword">module</a> <a id="3929" href="blog/sheafs/index.html#3929" class="Module">_</a> <a id="3931" class="Keyword">where</a>
  <a id="3939" class="Keyword">open</a> <a id="3944" href="blog/sheafs/index.html#3012" class="Module">Preorder</a>
  <a id="3955" href="blog/sheafs/index.html#3955" class="Function">ex-preorder</a> <a id="3967" class="Symbol">:</a> <a id="3969" href="blog/sheafs/index.html#3012" class="Record">Preorder</a>
  <a id="3980" href="blog/sheafs/index.html#3955" class="Function">ex-preorder</a> <a id="3992" class="Symbol">.</a><a id="3993" href="blog/sheafs/index.html#3045" class="Field">Carrier</a> <a id="4001" class="Symbol">=</a> <a id="4003" href="blog/sheafs/index.html#3385" class="Datatype">Ex</a>
  <a id="4008" href="blog/sheafs/index.html#3955" class="Function">ex-preorder</a> <a id="4020" class="Symbol">.</a><a id="4021" href="blog/sheafs/index.html#3063" class="Field Operator">_&lt;_</a> <a id="4025" class="Symbol">=</a> <a id="4027" href="blog/sheafs/index.html#3714" class="Datatype">Ex&lt;</a>
  <a id="4033" href="blog/sheafs/index.html#3955" class="Function">ex-preorder</a> <a id="4045" class="Symbol">.</a><a id="4046" href="blog/sheafs/index.html#3097" class="Field">&lt;-refl</a> <a id="4053" class="Symbol">=</a> <a id="4055" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a>
  <a id="4066" href="blog/sheafs/index.html#3955" class="Function">ex-preorder</a> <a id="4078" class="Symbol">.</a><a id="4079" href="blog/sheafs/index.html#3132" class="Field">&lt;-trans</a> <a id="4087" href="blog/sheafs/index.html#3742" class="InductiveConstructor">e12&lt;v1</a> <a id="4094" class="Symbol">(</a><a id="4095" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="4104" class="DottedPattern Symbol">.</a><a id="4105" href="blog/sheafs/index.html#3402" class="DottedPattern InductiveConstructor">v1</a><a id="4107" class="Symbol">)</a> <a id="4109" class="Symbol">=</a> <a id="4111" href="blog/sheafs/index.html#3742" class="InductiveConstructor">e12&lt;v1</a>
  <a id="4120" href="blog/sheafs/index.html#3955" class="Function">ex-preorder</a> <a id="4132" class="Symbol">.</a><a id="4133" href="blog/sheafs/index.html#3132" class="Field">&lt;-trans</a> <a id="4141" href="blog/sheafs/index.html#3764" class="InductiveConstructor">e12&lt;v2</a> <a id="4148" class="Symbol">(</a><a id="4149" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="4158" class="DottedPattern Symbol">.</a><a id="4159" href="blog/sheafs/index.html#3413" class="DottedPattern InductiveConstructor">v2</a><a id="4161" class="Symbol">)</a> <a id="4163" class="Symbol">=</a> <a id="4165" href="blog/sheafs/index.html#3764" class="InductiveConstructor">e12&lt;v2</a>
  <a id="4174" href="blog/sheafs/index.html#3955" class="Function">ex-preorder</a> <a id="4186" class="Symbol">.</a><a id="4187" href="blog/sheafs/index.html#3132" class="Field">&lt;-trans</a> <a id="4195" class="Symbol">(</a><a id="4196" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="4205" class="Symbol">_)</a> <a id="4208" href="blog/sheafs/index.html#3742" class="InductiveConstructor">e12&lt;v1</a> <a id="4215" class="Symbol">=</a> <a id="4217" href="blog/sheafs/index.html#3742" class="InductiveConstructor">e12&lt;v1</a>
  <a id="4226" href="blog/sheafs/index.html#3955" class="Function">ex-preorder</a> <a id="4238" class="Symbol">.</a><a id="4239" href="blog/sheafs/index.html#3132" class="Field">&lt;-trans</a> <a id="4247" class="Symbol">(</a><a id="4248" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="4257" class="Symbol">_)</a> <a id="4260" href="blog/sheafs/index.html#3764" class="InductiveConstructor">e12&lt;v2</a> <a id="4267" class="Symbol">=</a> <a id="4269" href="blog/sheafs/index.html#3764" class="InductiveConstructor">e12&lt;v2</a>
  <a id="4278" href="blog/sheafs/index.html#3955" class="Function">ex-preorder</a> <a id="4290" class="Symbol">.</a><a id="4291" href="blog/sheafs/index.html#3132" class="Field">&lt;-trans</a> <a id="4299" class="Symbol">(</a><a id="4300" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="4309" href="blog/sheafs/index.html#4309" class="Bound">x</a><a id="4310" class="Symbol">)</a> <a id="4312" class="Symbol">(</a><a id="4313" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="4322" class="Symbol">_)</a> <a id="4325" class="Symbol">=</a> <a id="4327" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="4336" href="blog/sheafs/index.html#4309" class="Bound">x</a>
</pre>
<p>The paper goes on to say we have some sheaf <code>F</code>, which maps <span class="Agda"><a href="blog/sheafs/index.html#3385" class="Datatype">Ex</a></span>s to â€œjust about anything,â€ this codomain being called the <em>stalk.</em> For now, letâ€™s assume itâ€™s to <span class="Agda"><a data-type="Setâ‚" href="Agda.Primitive.html#326" class="Primitive">Set</a></span>.</p>
<p>Furthermore, the sheaf <code>F</code> also has a â€œsecond mechanism,â€ which in our example maps an edge <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>:</mo><msub><mi>v</mi><mi>i</mi></msub><mo>â†’</mo><msub><mi>v</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">e_{ij} : v_i \to v_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> to two functions:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>F</mi><mrow><msub><mi>v</mi><mi>i</mi></msub><mo separator="true">;</mo><msub><mi>e</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow></msub><mo>:</mo><mi>F</mi><mo stretchy="false">(</mo><msub><mi>v</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>â†’</mo><mi>F</mi><mo stretchy="false">(</mo><msub><mi>e</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>F</mi><mrow><msub><mi>v</mi><mi>j</mi></msub><mo separator="true">;</mo><msub><mi>e</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow></msub><mo>:</mo><mi>F</mi><mo stretchy="false">(</mo><msub><mi>v</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mo>â†’</mo><mi>F</mi><mo stretchy="false">(</mo><msub><mi>e</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">
F_{v_i;e_{ij}} : F(v_i) \to F(e_{ij}) \\
F_{v_j;e_{ij}} : F(v_j) \to F(e_{ij})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0307em;vertical-align:-0.3473em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">;</span><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3473em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.0307em;vertical-align:-0.3473em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span><span class="mpunct mtight">;</span><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3473em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p>This is where some of the frustration in only being given examples comes in. Why are these in the definition of a sheaf? The only thing that could possibly make any sense to me is that this comes from a more general construction:</p>
<pre class="text"><code>restrict : (x y : Ex) â†’ x &lt; y â†’ Stalk y â†’ Stalk x</code></pre>
<p>which states we have a mapping from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> if and only if we have <span style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>&lt;</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x &lt; y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>.</span> These <code>restrict</code> things are called <em>restriction maps</em>.</p>
<p>Whatâ€™s further confusing is the following point:</p>
<blockquote>
<p>Since each stalk is a vector space, it is natural to have our restriction maps be linear transformations described by matrices.</p>
</blockquote>
<p>Why linear transformations, and not just arbitrary functions? When I hear â€œlinear transformationâ€ I think homomorphism, or more probably, morphism in some category. Which then probably means the <code>Stalk</code> isnâ€™t a function to <span class="Agda"><a data-type="Setâ‚" href="Agda.Primitive.html#326" class="Primitive">Set</a></span>, itâ€™s a mapping into a category.</p>
<p>OK, so that all seems straightforward enough. Letâ€™s try to formalize it.</p>
<pre class="Agda"><a id="5714" class="Keyword">module</a> <a id="Sheaf"></a><a id="5721" href="blog/sheafs/index.html#5721" class="Module">Sheaf</a> <a id="5727" class="Symbol">(</a><a id="5728" href="blog/sheafs/index.html#5728" class="Bound">pre</a> <a id="5732" class="Symbol">:</a> <a id="5734" href="blog/sheafs/index.html#3012" class="Record">Preorder</a><a id="5742" class="Symbol">)</a> <a id="5744" class="Symbol">(</a><a id="5745" href="blog/sheafs/index.html#5745" class="Bound">C</a> <a id="5747" class="Symbol">:</a> <a data-type="Set" id="5749" href="Categories.html#257" class="Record">Category</a><a id="5757" class="Symbol">)</a> <a id="5759" class="Keyword">where</a>
  <a id="5767" class="Keyword">open</a> <a id="5772" href="blog/sheafs/index.html#3012" class="Module">Preorder</a> <a id="5781" href="blog/sheafs/index.html#5728" class="Bound">pre</a>
  <a id="5787" class="Keyword">open</a> <a data-type="Set" id="5792" href="Categories.html#257" class="Module">Category</a> <a id="5801" href="blog/sheafs/index.html#5745" class="Bound">C</a>

  <a id="5806" class="Keyword">record</a> <a id="Sheaf.Sheaf"></a><a id="5813" href="blog/sheafs/index.html#5813" class="Record">Sheaf</a> <a id="5819" class="Symbol">:</a> <a data-type="Setâ‚" id="5821" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="5825" class="Keyword">where</a>
    <a id="5835" class="Keyword">field</a>
      <a id="Sheaf.Sheaf.Stalk"></a><a id="5847" href="blog/sheafs/index.html#5847" class="Field">Stalk</a> <a id="5853" class="Symbol">:</a> <a id="5855" href="blog/sheafs/index.html#3045" class="Function">Carrier</a> <a id="5863" class="Symbol">â†’</a> <a data-type="Category â†’ Set" id="5865" href="Categories.html#362" class="Field">Obj</a>
      <a id="Sheaf.Sheaf.restrict"></a><a id="5875" href="blog/sheafs/index.html#5875" class="Field">restrict</a> <a id="5884" class="Symbol">:</a> <a id="5886" class="Symbol">{</a><a id="5887" href="blog/sheafs/index.html#5887" class="Bound">x</a> <a id="5889" href="blog/sheafs/index.html#5889" class="Bound">y</a> <a id="5891" class="Symbol">:</a> <a id="5893" href="blog/sheafs/index.html#3045" class="Function">Carrier</a><a id="5900" class="Symbol">}</a> <a id="5902" class="Symbol">â†’</a> <a id="5904" href="blog/sheafs/index.html#5887" class="Bound">x</a> <a id="5906" href="blog/sheafs/index.html#3063" class="Function Operator">&lt;</a> <a id="5908" href="blog/sheafs/index.html#5889" class="Bound">y</a> <a id="5910" class="Symbol">â†’</a> <a id="5912" href="blog/sheafs/index.html#5847" class="Field">Stalk</a> <a id="5918" href="blog/sheafs/index.html#5889" class="Bound">y</a> <a data-type="(r : Category) â†’ Obj r â†’ Obj r â†’ Set" id="5920" href="Categories.html#376" class="Field Operator">~&gt;</a> <a id="5923" href="blog/sheafs/index.html#5847" class="Field">Stalk</a> <a id="5929" href="blog/sheafs/index.html#5887" class="Bound">x</a>
</pre>
<p>which seems reasonable. The paper now gives us a specific sheaf, with <span class="Agda"><a href="Data.Vec.Base.html#3807" class="Function">restrict</a></span> <span class="Agda"><a href="blog/sheafs/index.html#3742" class="InductiveConstructor">e12&lt;v1</a></span> being the linear map encoded by the matrix:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">
\begin{bmatrix}
1 &amp; -1 \\
0 &amp; 2
\end{bmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p>
<p>which we can write as a morphism in <span class="Agda"><a data-type="Category" href="Category.LIN.html#591" class="Function">LIN</a></span> (the category of linear algebra, with objects as vector spaces, and morphisms as linear maps):</p>
<!--
<pre class="Agda"><a id="6292" class="Keyword">module</a> <a id="6299" href="blog.sheafs.html#6299" class="Module">_</a> <a id="6301" class="Keyword">where</a>
  <a id="6309" class="Keyword">open</a> <a id="6314" href="Categories.html#257" class="Module">Category</a> <a id="6323" href="Category.LIN.html#591" class="Function">LIN</a>
  <a id="6329" class="Keyword">open</a> <a id="6334" href="blog.sheafs.html#5721" class="Module">Sheaf</a> <a id="6340" href="blog.sheafs.html#3955" class="Function">ex-preorder</a> <a id="6352" href="Category.LIN.html#591" class="Function">LIN</a>
  <a id="6358" class="Keyword">open</a> <a id="6363" href="blog.sheafs.html#5813" class="Module">Sheaf.Sheaf</a>

  <a id="6378" class="Keyword">postulate</a>
    <a id="6392" href="blog.sheafs.html#6392" class="Postulate">trustMe</a> <a id="6400" class="Symbol">:</a> <a id="6402" class="Symbol">âˆ€</a> <a id="6404" class="Symbol">{</a><a id="6405" href="blog.sheafs.html#6405" class="Bound">A</a> <a id="6407" class="Symbol">:</a> <a id="6409" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="6412" class="Symbol">}</a> <a id="6414" class="Symbol">{</a><a id="6415" href="blog.sheafs.html#6415" class="Bound">a</a> <a id="6417" href="blog.sheafs.html#6417" class="Bound">b</a> <a id="6419" class="Symbol">:</a> <a id="6421" href="blog.sheafs.html#6405" class="Bound">A</a><a id="6422" class="Symbol">}</a> <a id="6424" class="Symbol">â†’</a> <a id="6426" href="blog.sheafs.html#6415" class="Bound">a</a> <a id="6428" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">â‰¡</a> <a id="6430" href="blog.sheafs.html#6417" class="Bound">b</a>
    <a id="6436" href="blog.sheafs.html#6436" class="Postulate">sorry</a> <a id="6442" class="Symbol">:</a> <a id="6444" class="Symbol">âˆ€</a> <a id="6446" class="Symbol">{</a><a id="6447" href="blog.sheafs.html#6447" class="Bound">A</a> <a id="6449" class="Symbol">:</a> <a id="6451" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="6454" class="Symbol">}</a> <a id="6456" class="Symbol">â†’</a> <a id="6458" href="blog.sheafs.html#6447" class="Bound">A</a>
</pre>-->
<pre class="Agda">  <a id="6475" href="blog/sheafs/index.html#6475" class="Function">e12~&gt;v1</a> <a id="6483" class="Symbol">:</a> <a id="6485" class="Number">2</a> <a data-type="(r : Category) â†’ Obj r â†’ Obj r â†’ Set" id="6487" href="Categories.html#376" class="Function Operator">~&gt;</a> <a id="6490" class="Number">2</a>
  <a id="6494" href="blog/sheafs/index.html#6475" class="Function">e12~&gt;v1</a> <a id="6502" class="Symbol">.</a><a data-type="LinMap m n â†’ Vec Int m â†’ Vec Int n" id="6503" href="Category.LIN.html#344" class="Field">linmap</a> <a id="6510" class="Symbol">(</a><a id="6511" href="blog/sheafs/index.html#6511" class="Bound">x</a> <a id="6513" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a id="6515" href="blog/sheafs/index.html#6515" class="Bound">y</a> <a id="6517" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a id="6519" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a><a id="6521" class="Symbol">)</a> <a id="6523" class="Symbol">=</a>
    <a id="6529" class="Symbol">(</a><a id="6530" href="blog/sheafs/index.html#6511" class="Bound">x</a> <a id="6532" href="Data.Integer.Base.html#5023" class="Function Operator">-</a> <a id="6534" href="blog/sheafs/index.html#6515" class="Bound">y</a><a id="6535" class="Symbol">)</a>   <a id="6539" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a>
    <a id="6545" class="Symbol">(</a><a data-type="Nat â†’ Int" id="6546" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="6548" class="Number">2</a> <a id="6550" href="Data.Integer.Base.html#5169" class="Function Operator">*</a> <a id="6552" href="blog/sheafs/index.html#6515" class="Bound">y</a><a id="6553" class="Symbol">)</a> <a id="6555" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a>
             <a id="6570" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a>
  <a id="6575" href="blog/sheafs/index.html#6475" class="Function">e12~&gt;v1</a> <a id="6583" class="Symbol">.</a><a data-type="(r : LinMap m n) (u v : Vec Int m) â†’
linmap r (zipWith _+_ u v) â‰¡ zipWith _+_ (linmap r u) (linmap r v)" id="6584" href="Category.LIN.html#375" class="Field">preserves-+</a> <a id="6596" href="blog/sheafs/index.html#6596" class="Bound">u</a> <a id="6598" href="blog/sheafs/index.html#6598" class="Bound">v</a> <a id="6600" class="Symbol">=</a> <a id="6602" href="blog/sheafs/index.html#6392" class="Postulate">trustMe</a>
  <a id="6612" href="blog/sheafs/index.html#6475" class="Function">e12~&gt;v1</a> <a id="6620" class="Symbol">.</a><a data-type="(r : LinMap m n) (a : Int) (v : Vec Int m) â†’
linmap r (map (_*_ a) v) â‰¡ map (_*_ a) (linmap r v)" id="6621" href="Category.LIN.html#478" class="Field">preserves-*</a> <a id="6633" href="blog/sheafs/index.html#6633" class="Bound">a</a> <a id="6635" href="blog/sheafs/index.html#6635" class="Bound">v</a> <a id="6637" class="Symbol">=</a> <a id="6639" href="blog/sheafs/index.html#6392" class="Postulate">trustMe</a>
</pre>
<p>and <span class="Agda"><a href="Data.Vec.Base.html#3807" class="Function">restrict</a></span> <span class="Agda"><a href="blog/sheafs/index.html#3764" class="InductiveConstructor">e12&lt;v2</a></span> being the linear map encoded by the matrix:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">
\begin{bmatrix}
3 &amp; 1 &amp; -1 \\
2 &amp; 0 &amp; 2
\end{bmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p>
<p>written as:</p>
<pre class="Agda">  <a id="6815" href="blog/sheafs/index.html#6815" class="Function">e12~&gt;v2</a> <a id="6823" class="Symbol">:</a> <a id="6825" class="Number">3</a> <a data-type="(r : Category) â†’ Obj r â†’ Obj r â†’ Set" id="6827" href="Categories.html#376" class="Function Operator">~&gt;</a> <a id="6830" class="Number">2</a>
  <a id="6834" href="blog/sheafs/index.html#6815" class="Function">e12~&gt;v2</a> <a id="6842" class="Symbol">.</a><a data-type="LinMap m n â†’ Vec Int m â†’ Vec Int n" id="6843" href="Category.LIN.html#344" class="Field">linmap</a> <a id="6850" class="Symbol">(</a><a id="6851" href="blog/sheafs/index.html#6851" class="Bound">x</a> <a id="6853" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a id="6855" href="blog/sheafs/index.html#6855" class="Bound">y</a> <a id="6857" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a id="6859" href="blog/sheafs/index.html#6859" class="Bound">z</a> <a id="6861" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a id="6863" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a><a id="6865" class="Symbol">)</a> <a id="6867" class="Symbol">=</a>
    <a id="6873" class="Symbol">(</a><a data-type="Nat â†’ Int" id="6874" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="6876" class="Number">3</a> <a id="6878" href="Data.Integer.Base.html#5169" class="Function Operator">*</a> <a id="6880" href="blog/sheafs/index.html#6851" class="Bound">x</a> <a id="6882" href="Data.Integer.Base.html#4844" class="Function Operator">+</a> <a id="6884" href="blog/sheafs/index.html#6855" class="Bound">y</a> <a id="6886" href="Data.Integer.Base.html#5023" class="Function Operator">-</a> <a id="6888" href="blog/sheafs/index.html#6859" class="Bound">z</a><a id="6889" class="Symbol">)</a>   <a id="6893" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a>
    <a id="6899" class="Symbol">(</a><a data-type="Nat â†’ Int" id="6900" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="6902" class="Number">2</a> <a id="6904" href="Data.Integer.Base.html#5169" class="Function Operator">*</a> <a id="6906" href="blog/sheafs/index.html#6851" class="Bound">x</a> <a id="6908" href="Data.Integer.Base.html#4844" class="Function Operator">+</a> <a data-type="Nat â†’ Int" id="6910" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="6912" class="Number">2</a> <a id="6914" href="Data.Integer.Base.html#5169" class="Function Operator">*</a> <a id="6916" href="blog/sheafs/index.html#6859" class="Bound">z</a><a id="6917" class="Symbol">)</a> <a id="6919" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a>
                       <a id="6944" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a>
  <a id="6949" href="blog/sheafs/index.html#6815" class="Function">e12~&gt;v2</a> <a id="6957" class="Symbol">.</a><a data-type="(r : LinMap m n) (u v : Vec Int m) â†’
linmap r (zipWith _+_ u v) â‰¡ zipWith _+_ (linmap r u) (linmap r v)" id="6958" href="Category.LIN.html#375" class="Field">preserves-+</a> <a id="6970" href="blog/sheafs/index.html#6970" class="Bound">u</a> <a id="6972" href="blog/sheafs/index.html#6972" class="Bound">v</a> <a id="6974" class="Symbol">=</a> <a id="6976" href="blog/sheafs/index.html#6392" class="Postulate">trustMe</a>
  <a id="6986" href="blog/sheafs/index.html#6815" class="Function">e12~&gt;v2</a> <a id="6994" class="Symbol">.</a><a data-type="(r : LinMap m n) (a : Int) (v : Vec Int m) â†’
linmap r (map (_*_ a) v) â‰¡ map (_*_ a) (linmap r v)" id="6995" href="Category.LIN.html#478" class="Field">preserves-*</a> <a id="7007" href="blog/sheafs/index.html#7007" class="Bound">a</a> <a id="7009" href="blog/sheafs/index.html#7009" class="Bound">v</a> <a id="7011" class="Symbol">=</a> <a id="7013" href="blog/sheafs/index.html#6392" class="Postulate">trustMe</a>
</pre>
<p>Thus, we can finally build the example <code>Sheaf</code>:</p>
<pre class="Agda">  <a id="7081" href="blog/sheafs/index.html#7081" class="Function">ex</a> <a id="7084" class="Symbol">:</a> <a id="7086" href="blog/sheafs/index.html#5813" class="Record">Sheaf</a>
  <a id="7094" href="blog/sheafs/index.html#7081" class="Function">ex</a> <a id="7097" class="Symbol">.</a><a id="7098" href="blog/sheafs/index.html#5847" class="Field">Stalk</a> <a id="7104" href="blog/sheafs/index.html#3402" class="InductiveConstructor">v1</a>  <a id="7108" class="Symbol">=</a> <a id="7110" class="Number">2</a>
  <a id="7114" href="blog/sheafs/index.html#7081" class="Function">ex</a> <a id="7117" class="Symbol">.</a><a id="7118" href="blog/sheafs/index.html#5847" class="Field">Stalk</a> <a id="7124" href="blog/sheafs/index.html#3413" class="InductiveConstructor">v2</a>  <a id="7128" class="Symbol">=</a> <a id="7130" class="Number">3</a>
  <a id="7134" href="blog/sheafs/index.html#7081" class="Function">ex</a> <a id="7137" class="Symbol">.</a><a id="7138" href="blog/sheafs/index.html#5847" class="Field">Stalk</a> <a id="7144" href="blog/sheafs/index.html#3424" class="InductiveConstructor">e12</a> <a id="7148" class="Symbol">=</a> <a id="7150" class="Number">2</a>
  <a id="7154" href="blog/sheafs/index.html#7081" class="Function">ex</a> <a id="7157" class="Symbol">.</a><a id="7158" href="blog/sheafs/index.html#5875" class="Field">restrict</a> <a id="7167" href="blog/sheafs/index.html#3742" class="InductiveConstructor">e12&lt;v1</a> <a id="7174" class="Symbol">=</a> <a id="7176" href="blog/sheafs/index.html#6475" class="Function">e12~&gt;v1</a>
  <a id="7186" href="blog/sheafs/index.html#7081" class="Function">ex</a> <a id="7189" class="Symbol">.</a><a id="7190" href="blog/sheafs/index.html#5875" class="Field">restrict</a> <a id="7199" href="blog/sheafs/index.html#3764" class="InductiveConstructor">e12&lt;v2</a> <a id="7206" class="Symbol">=</a> <a id="7208" href="blog/sheafs/index.html#6815" class="Function">e12~&gt;v2</a>
  <a id="7218" href="blog/sheafs/index.html#7081" class="Function">ex</a> <a id="7221" class="Symbol">.</a><a id="7222" href="blog/sheafs/index.html#5875" class="Field">restrict</a> <a id="7231" class="Symbol">(</a><a id="7232" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="7241" href="blog/sheafs/index.html#7241" class="Bound">z</a><a id="7242" class="Symbol">)</a> <a id="7244" class="Symbol">=</a> <a data-type="(r : Category) â†’ (r ~&gt; A) A" id="7246" href="Categories.html#648" class="Function">id</a>
</pre>
<p>Whatâ€™s with the <span class="Agda"><a href="blog/sheafs/index.html#5847" class="Field">Stalk</a></span> of <span class="Agda"><a href="blog/sheafs/index.html#3402" class="InductiveConstructor">v1</a></span> being 2, you might ask? Remember, the stalk is an object in some category, in this case <span class="Agda"><a data-type="Category" href="Category.LIN.html#591" class="Function">LIN</a></span>. Objects in <span class="Agda"><a data-type="Category" href="Category.LIN.html#591" class="Function">LIN</a></span> are natural numbers, corresponding to the length of vectors.</p>
<h3 id="sections-and-global-sections"><a href="#sections-and-global-sections" class="header-link">Sections and Global Sections<span class="header-link-emoji">ğŸ”—</span></a></h3>
<p>Hereâ€™s where our categorical generalization of the paper goes a bit haywire. The paper defines a <em>section</em> as picking an element from each <span class="Agda"><a href="blog/sheafs/index.html#5847" class="Field">Stalk</a></span> of the sheaf. He picks, for example:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>âˆˆ</mo><mtext>StalkÂ </mtext><mi>v</mi><mn>1</mn></mrow><annotation encoding="application/x-tex">
\begin{bmatrix}
2 \\ 1
\end{bmatrix}
\in \text{Stalk } v1
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">StalkÂ </span></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord">1</span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>âˆˆ</mo><mtext>StalkÂ </mtext><mi>v</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">
\begin{bmatrix}
3 \\ -1 \\ 0
\end{bmatrix}
\in \text{Stalk } v2
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-2.25em;"><span class="pstrut" style="height:3.155em;"></span><span class="delimsizinginner delim-size4"><span>â£</span></span></span><span style="top:-3.397em;"><span class="pstrut" style="height:3.155em;"></span><span style="height:0.016em;width:0.6667em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.6667em" height="0.016em" style="width:0.6667em" viewBox="0 0 666.67 16" preserveAspectRatio="xMinYMin"><path d="M319 0 H403 V16 H319z M319 0 H403 V16 H319z"></path></svg></span></span><span style="top:-4.05em;"><span class="pstrut" style="height:3.155em;"></span><span class="delimsizinginner delim-size4"><span>â¡</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-2.25em;"><span class="pstrut" style="height:3.155em;"></span><span class="delimsizinginner delim-size4"><span>â¦</span></span></span><span style="top:-3.397em;"><span class="pstrut" style="height:3.155em;"></span><span style="height:0.016em;width:0.6667em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.6667em" height="0.016em" style="width:0.6667em" viewBox="0 0 666.67 16" preserveAspectRatio="xMinYMin"><path d="M263 0 H347 V16 H263z M263 0 H347 V16 H263z"></path></svg></span></span><span style="top:-4.05em;"><span class="pstrut" style="height:3.155em;"></span><span class="delimsizinginner delim-size4"><span>â¤</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">StalkÂ </span></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord">2</span></span></span></span></span></p>
<p>and</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>âˆˆ</mo><mtext>StalkÂ </mtext><mi>e</mi><mn>12</mn></mrow><annotation encoding="application/x-tex">
\begin{bmatrix}
1 \\ -1
\end{bmatrix}
\in \text{Stalk } e12
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">StalkÂ </span></span><span class="mord mathnormal">e</span><span class="mord">12</span></span></span></span></span></p>
<p>which is all fine and dandy, except that when we categorize, our objects no longer have internal structure. Fortunately, we can use â€œgeneralized elements,â€ a.k.a., morphisms out of the <span class="Agda"><a data-type="HasTerminal C â†’ Obj C" href="Categories.html#2711" class="Function">terminal</a></span> object.</p>
<!--
<pre class="Agda"><a id="8144" class="Keyword">module</a> <a id="BadSections"></a><a id="8151" href="blog.sheafs.html#8151" class="Module">BadSections</a>
         <a id="8172" class="Symbol">{</a><a id="8173" href="blog.sheafs.html#8173" class="Bound">pre</a> <a id="8177" class="Symbol">:</a> <a id="8179" href="blog.sheafs.html#3012" class="Record">Preorder</a><a id="8187" class="Symbol">}</a>
         <a id="8198" class="Symbol">{</a><a id="8199" href="blog.sheafs.html#8199" class="Bound">C</a> <a id="8201" class="Symbol">:</a> <a id="8203" href="Categories.html#257" class="Record">Category</a><a id="8211" class="Symbol">}</a>
         <a id="8222" class="Symbol">(</a><a id="8223" href="blog.sheafs.html#8223" class="Bound">term</a> <a id="8228" class="Symbol">:</a> <a id="8230" href="Categories.html#2671" class="Record">HasTerminal</a> <a id="8242" href="blog.sheafs.html#8199" class="Bound">C</a><a id="8243" class="Symbol">)</a>
         <a id="8254" class="Symbol">(</a><a id="8255" href="blog.sheafs.html#8255" class="Bound">sheaf</a> <a id="8261" class="Symbol">:</a> <a id="8263" href="blog.sheafs.html#5813" class="Record">Sheaf.Sheaf</a> <a id="8275" href="blog.sheafs.html#8173" class="Bound">pre</a> <a id="8279" href="blog.sheafs.html#8199" class="Bound">C</a><a id="8280" class="Symbol">)</a> <a id="8282" class="Keyword">where</a>
  <a id="8290" class="Keyword">open</a> <a id="8295" href="Categories.html#2671" class="Module">HasTerminal</a> <a id="8307" href="blog.sheafs.html#8223" class="Bound">term</a>
  <a id="8314" class="Keyword">open</a> <a id="8319" href="blog.sheafs.html#3012" class="Module">Preorder</a> <a id="8328" href="blog.sheafs.html#8173" class="Bound">pre</a>
  <a id="8334" class="Keyword">open</a> <a id="8339" href="blog.sheafs.html#5813" class="Module">Sheaf.Sheaf</a> <a id="8351" href="blog.sheafs.html#8255" class="Bound">sheaf</a>
  <a id="8359" class="Keyword">open</a> <a id="8364" href="Categories.html#257" class="Module">Category</a> <a id="8373" href="blog.sheafs.html#8199" class="Bound">C</a>
</pre>-->
<pre class="Agda">  <a id="BadSections.Section"></a><a id="8390" href="blog/sheafs/index.html#8390" class="Function">Section</a> <a id="8398" class="Symbol">:</a> <a id="8400" href="blog/sheafs/index.html#3045" class="Function">Carrier</a> <a id="8408" class="Symbol">â†’</a> <a data-type="Setâ‚" id="8410" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="8416" href="blog/sheafs/index.html#8390" class="Function">Section</a> <a id="8424" href="blog/sheafs/index.html#8424" class="Bound">c</a> <a id="8426" class="Symbol">=</a> <a data-type="HasTerminal C â†’ Obj C" id="8428" href="Categories.html#2711" class="Function">terminal</a> <a data-type="(r : Category) â†’ Obj r â†’ Obj r â†’ Set" id="8437" href="Categories.html#376" class="Function Operator">~&gt;</a> <a id="8440" href="blog/sheafs/index.html#5847" class="Field">Stalk</a> <a id="8446" href="blog/sheafs/index.html#8424" class="Bound">c</a>
</pre>
<p>That is, a <span class="Agda"><a href="blog/sheafs/index.html#8390" class="Function">Section</a></span> is a mapping from every element in the <span class="Agda"><a href="blog/sheafs/index.html#3012" class="Record">Preorder</a></span> to a generalized element of its <span class="Agda"><a href="blog/sheafs/index.html#5847" class="Field">Stalk</a></span>. We can evaluate a <span class="Agda"><a href="blog/sheafs/index.html#8390" class="Function">Section</a></span> by checking the commutativity of all <span class="Agda"><a href="Data.Vec.Base.html#3807" class="Function">restrict</a></span>s. That is, weâ€™d like the following diagram to commute:</p>
<div class="diagram-container">
<img src="0680ae3cf1615f7e2348b22ea86fd926ed0e9144.svg" title="commutative diagram" class="diagram quiver" />
</div>
<p>Doing this in Agda is hard because it wants lots of dumb arithmetic proofs, so instead weâ€™ll make ourselves content with some by-hand math:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo>âˆ˜</mo><mi>S</mi><mi>v</mi><mn>1</mn><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo mathvariant="normal">â‰ </mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">
r \circ S v1
=  \begin{bmatrix}
      1 &amp; -1 \\
      0 &amp; 2
    \end{bmatrix}
    \begin{bmatrix}
      2 \\ 1
    \end{bmatrix}
=  \begin{bmatrix}
      1 \\
      2
    \end{bmatrix}
\neq
    \begin{bmatrix}
    1 \\ -1
    \end{bmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ˜</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p>
<p>So, our chosen <span class="Agda"><a href="blog/sheafs/index.html#8390" class="Function">Section</a></span> doesnâ€™t commute. That is, it doesnâ€™t respect the global equalities, thus it is not a <em>global section.</em> Sounds like something worth formalizing:</p>
<pre class="Agda">  <a id="9588" class="Keyword">record</a> <a id="BadSections.GlobalSection"></a><a id="9595" href="blog/sheafs/index.html#9595" class="Record">GlobalSection</a> <a id="9609" class="Symbol">:</a> <a data-type="Setâ‚" id="9611" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="9615" class="Keyword">where</a>
    <a id="9625" class="Keyword">field</a>
      <a id="BadSections.GlobalSection.section"></a><a id="9637" href="blog/sheafs/index.html#9637" class="Field">section</a> <a id="9645" class="Symbol">:</a> <a id="9647" class="Symbol">forall</a> <a id="9654" class="Symbol">(</a><a id="9655" href="blog/sheafs/index.html#9655" class="Bound">c</a> <a id="9657" class="Symbol">:</a> <a id="9659" href="blog/sheafs/index.html#3045" class="Function">Carrier</a><a id="9666" class="Symbol">)</a> <a id="9668" class="Symbol">â†’</a> <a id="9670" href="blog/sheafs/index.html#8390" class="Function">Section</a> <a id="9678" href="blog/sheafs/index.html#9655" class="Bound">c</a>
      <a id="BadSections.GlobalSection.commutes"></a><a id="9686" href="blog/sheafs/index.html#9686" class="Field">commutes</a>
        <a id="9703" class="Symbol">:</a> <a id="9705" class="Symbol">{</a><a id="9706" href="blog/sheafs/index.html#9706" class="Bound">x</a> <a id="9708" href="blog/sheafs/index.html#9708" class="Bound">y</a> <a id="9710" class="Symbol">:</a> <a id="9712" href="blog/sheafs/index.html#3045" class="Function">Carrier</a><a id="9719" class="Symbol">}</a>
        <a id="9729" class="Symbol">â†’</a> <a id="9731" class="Symbol">(</a><a id="9732" href="blog/sheafs/index.html#9732" class="Bound">x&lt;y</a> <a id="9736" class="Symbol">:</a> <a id="9738" href="blog/sheafs/index.html#9706" class="Bound">x</a> <a id="9740" href="blog/sheafs/index.html#3063" class="Function Operator">&lt;</a> <a id="9742" href="blog/sheafs/index.html#9708" class="Bound">y</a><a id="9743" class="Symbol">)</a>
        <a id="9753" class="Symbol">â†’</a> <a id="9755" href="blog/sheafs/index.html#5875" class="Field">restrict</a> <a id="9764" href="blog/sheafs/index.html#9732" class="Bound">x&lt;y</a> <a data-type="(r : Category) â†’ (r ~&gt; B) C â†’ (r ~&gt; A) B â†’ (r ~&gt; A) C" id="9768" href="Categories.html#676" class="Function Operator">âˆ˜</a> <a id="9770" href="blog/sheafs/index.html#9637" class="Field">section</a> <a id="9778" href="blog/sheafs/index.html#9708" class="Bound">y</a> <a data-type="(r : Category) â†’ (r ~&gt; A) B â†’ (r ~&gt; A) B â†’ Set" id="9780" href="Categories.html#450" class="Function Operator">â‰ˆ</a> <a id="9782" href="blog/sheafs/index.html#9637" class="Field">section</a> <a id="9790" href="blog/sheafs/index.html#9706" class="Bound">x</a>
</pre>
<p>All thatâ€™s left is to find a <span class="Agda"><a href="blog/sheafs/index.html#9595" class="Record">GlobalSection</a></span> of our weird graph category:</p>
<!--
<pre class="Agda"><a id="9888" class="Keyword">module</a> <a id="BadEx"></a><a id="9895" href="blog.sheafs.html#9895" class="Module">BadEx</a> <a id="9901" class="Keyword">where</a>
  <a id="9909" class="Keyword">open</a> <a id="9914" href="blog.sheafs.html#3012" class="Module">Preorder</a>
  <a id="9925" class="Keyword">open</a> <a id="9930" href="Categories.html#257" class="Module">Category</a> <a id="9939" href="Category.LIN.html#591" class="Function">LIN</a>
  <a id="9945" class="Keyword">open</a> <a id="9950" href="blog.sheafs.html#5721" class="Module">Sheaf</a> <a id="9956" href="blog.sheafs.html#3955" class="Function">ex-preorder</a> <a id="9968" href="Category.LIN.html#591" class="Function">LIN</a>
  <a id="9974" class="Keyword">open</a> <a id="9979" href="blog.sheafs.html#5813" class="Module">Sheaf.Sheaf</a>
</pre>-->
<p>Unfortunately, this formalization doesnâ€™t quite work out; there are no interesting arrows out of <span class="Agda"><a data-type="HasTerminal C â†’ Obj C" href="Categories.html#2711" class="Function">terminal</a></span>:</p>
<pre class="Agda">  <a id="BadEx.boring-arrows"></a><a id="10123" href="blog/sheafs/index.html#10123" class="Function">boring-arrows</a>
      <a id="10143" class="Symbol">:</a> <a id="10145" class="Symbol">(</a><a id="10146" href="blog/sheafs/index.html#10146" class="Bound">f</a> <a id="10148" class="Symbol">:</a> <a id="10150" class="Number">0</a> <a data-type="(r : Category) â†’ Obj r â†’ Obj r â†’ Set" id="10152" href="Categories.html#376" class="Function Operator">~&gt;</a> <a id="10155" class="Number">1</a><a id="10156" class="Symbol">)</a>
      <a id="10164" class="Symbol">â†’</a> <a id="10166" class="Symbol">(</a><a id="10167" href="blog/sheafs/index.html#10167" class="Bound">x</a> <a id="10169" class="Symbol">:</a> <a id="10171" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a data-type="Set" id="10175" href="Agda.Builtin.Int.html#246" class="Datatype">â„¤</a> <a id="10177" class="Number">0</a><a id="10178" class="Symbol">)</a>
      <a id="10186" class="Symbol">â†’</a> <a id="10188" href="blog/sheafs/index.html#10146" class="Bound">f</a> <a id="10190" class="Symbol">.</a><a data-type="LinMap m n â†’ Vec Int m â†’ Vec Int n" id="10191" href="Category.LIN.html#344" class="Field">linmap</a> <a id="10198" href="blog/sheafs/index.html#10167" class="Bound">x</a> <a id="10200" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">â‰¡</a> <a data-type="Nat â†’ Int" id="10202" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="10204" class="Number">0</a> <a id="10206" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a id="10208" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a>
  <a id="10213" href="blog/sheafs/index.html#10123" class="Function">boring-arrows</a> <a id="10227" href="blog/sheafs/index.html#10227" class="Bound">f</a> <a id="10229" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a> <a id="10232" class="Keyword">with</a> <a id="10237" href="blog/sheafs/index.html#10227" class="Bound">f</a> <a id="10239" class="Symbol">.</a><a data-type="LinMap m n â†’ Vec Int m â†’ Vec Int n" id="10240" href="Category.LIN.html#344" class="Field">linmap</a> <a id="10247" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a> <a id="10250" class="Keyword">in</a> <a id="10253" class="Argument">eq</a>
  <a id="10258" class="Symbol">...</a> <a id="10262" class="Symbol">|</a> <a id="10264" href="blog/sheafs/index.html#10264" class="Bound">x</a> <a id="10266" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a id="10268" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a> <a id="10271" class="Keyword">rewrite</a> <a id="10279" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="10283" href="blog/sheafs/index.html#10253" class="Bound">eq</a> <a id="10286" class="Symbol">=</a>
    <a id="10292" href="Relation.Binary.PropositionalEquality.Core.html#2806" class="Function Operator">begin</a>
      <a id="10304" class="Bound">f</a> <a id="10306" class="Symbol">.</a><a data-type="LinMap m n â†’ Vec Int m â†’ Vec Int n" id="10307" href="Category.LIN.html#344" class="Field">linmap</a> <a id="10314" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a>                 <a id="10333" href="Relation.Binary.PropositionalEquality.Core.html#2864" class="Function Operator">â‰¡âŸ¨âŸ©</a>
      <a id="10343" class="Bound">f</a> <a id="10345" class="Symbol">.</a><a data-type="LinMap m n â†’ Vec Int m â†’ Vec Int n" id="10346" href="Category.LIN.html#344" class="Field">linmap</a> <a id="10353" class="Symbol">(</a><a id="10354" href="Data.Vec.Base.html#2580" class="Function">map</a> <a id="10358" class="Symbol">(</a><a data-type="Nat â†’ Int" id="10359" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="10361" class="Number">0</a> <a id="10363" href="Data.Integer.Base.html#5169" class="Function Operator">*_</a><a id="10365" class="Symbol">)</a> <a id="10367" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a><a id="10369" class="Symbol">)</a>  <span class="reasoning-step"><span class="as-written Function"><a id="10372" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">â‰¡âŸ¨</a> <a id="10375" class="Bound">f</a> <a id="10377" class="Symbol">.</a><a data-type="(r : LinMap m n) (a : Int) (v : Vec Int m) â†’
linmap r (map (_*_ a) v) â‰¡ map (_*_ a) (linmap r v)" id="10378" href="Category.LIN.html#478" class="Field">preserves-*</a> <a id="10390" class="Symbol">(</a><a data-type="Nat â†’ Int" id="10391" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="10393" class="Number">0</a><a id="10394" class="Symbol">)</a> <a id="10396" class="Symbol">_</a> <a id="10398" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">âŸ©</a></span><span class="alternate Function">â‰¡</span></span>
      <a id="10406" href="Data.Vec.Base.html#2580" class="Function">map</a> <a id="10410" class="Symbol">(</a><a data-type="Nat â†’ Int" id="10411" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="10413" class="Number">0</a> <a id="10415" href="Data.Integer.Base.html#5169" class="Function Operator">*_</a><a id="10417" class="Symbol">)</a> <a id="10419" class="Symbol">(</a><a id="10420" class="Bound">f</a> <a id="10422" class="Symbol">.</a><a data-type="LinMap m n â†’ Vec Int m â†’ Vec Int n" id="10423" href="Category.LIN.html#344" class="Field">linmap</a> <a id="10430" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a><a id="10432" class="Symbol">)</a>  <span class="reasoning-step"><span class="as-written Function"><a id="10435" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">â‰¡âŸ¨</a> <a id="10438" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="10443" class="Symbol">(</a><a id="10444" href="Data.Vec.Base.html#2580" class="Function">map</a> <a id="10448" class="Symbol">(</a><a data-type="Nat â†’ Int" id="10449" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="10451" class="Number">0</a> <a id="10453" href="Data.Integer.Base.html#5169" class="Function Operator">*_</a><a id="10455" class="Symbol">))</a> <a id="10458" href="blog/sheafs/index.html#10253" class="Bound">eq</a> <a id="10461" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">âŸ©</a></span><span class="alternate Function">â‰¡</span></span>
      <a id="10469" href="Data.Vec.Base.html#2580" class="Function">map</a> <a id="10473" class="Symbol">(</a><a data-type="Nat â†’ Int" id="10474" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="10476" class="Number">0</a> <a id="10478" href="Data.Integer.Base.html#5169" class="Function Operator">*_</a><a id="10480" class="Symbol">)</a> <a id="10482" class="Symbol">(</a><a id="10483" href="blog/sheafs/index.html#10264" class="Bound">x</a> <a id="10485" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a id="10487" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a><a id="10489" class="Symbol">)</a>        <a id="10498" href="Relation.Binary.PropositionalEquality.Core.html#2864" class="Function Operator">â‰¡âŸ¨âŸ©</a>
      <a id="10508" class="Symbol">(</a><a data-type="Nat â†’ Int" id="10509" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="10511" class="Number">0</a> <a id="10513" href="Data.Integer.Base.html#5169" class="Function Operator">*</a> <a id="10515" href="blog/sheafs/index.html#10264" class="Bound">x</a><a id="10516" class="Symbol">)</a> <a id="10518" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a id="10520" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a>               <span class="reasoning-step"><span class="as-written Function"><a id="10537" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">â‰¡âŸ¨</a> <a id="10540" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="10545" class="Symbol">(</a><a id="10546" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">_âˆ·</a> <a id="10549" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a><a id="10551" class="Symbol">)</a> <a id="10553" class="Symbol">(</a><a id="10554" href="Data.Integer.Properties.html#43999" class="Function">*-zeroË¡</a> <a id="10562" href="Data.Integer.Base.html#1444" class="InductiveConstructor">+0</a><a id="10564" class="Symbol">)</a> <a id="10566" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">âŸ©</a></span><span class="alternate Function">â‰¡</span></span>
      <a id="10574" href="Data.Integer.Base.html#1444" class="InductiveConstructor">+0</a> <a id="10577" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a id="10579" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a>
    <a id="10586" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">âˆ</a>
    <a id="10592" class="Keyword">where</a> <a id="10598" class="Keyword">open</a> <a id="10603" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">Eq.â‰¡-Reasoning</a>
</pre>
<p>So, thatâ€™s no good. Weâ€™ve modeled <span class="Agda"><a href="blog/sheafs/index.html#8390" class="Function">Section</a></span> incorrectly, as the generalized element approach doesnâ€™t work, since we are unable to follow the example.</p>
<p>What are some other ways to go from an <span class="Agda"><a data-type="Category â†’ Set" href="Categories.html#362" class="Field">Obj</a></span> to a <span class="Agda"><a data-type="Setâ‚" href="Agda.Primitive.html#326" class="Primitive">Set</a></span>? Maybe we could try modeling this as a functor to <span class="Agda"><a data-type="Category" href="Category.SET.html#216" class="Function">SET</a></span> instead:</p>
<!--
<pre class="Agda"><a id="10933" class="Keyword">module</a> <a id="10940" href="blog.sheafs.html#10940" class="Module">_</a> <a id="10942" class="Keyword">where</a>
  <a id="10950" class="Keyword">open</a> <a id="10955" href="Category.MyFunctor.html#93" class="Module Operator">_=&gt;_</a>
  <a id="10962" class="Keyword">open</a> <a id="10967" class="Keyword">import</a> <a id="10974" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="11012" class="Keyword">using</a> <a id="11018" class="Symbol">(</a><a id="11019" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="11023" class="Symbol">)</a>
</pre>-->
<pre class="Agda">  <a id="11040" href="blog/sheafs/index.html#11040" class="Function">ex-func</a> <a id="11048" class="Symbol">:</a> <a data-type="Category" id="11050" href="Category.LIN.html#591" class="Function">LIN</a> <a data-type="(C D : Category) â†’ Set" id="11054" href="Category.MyFunctor.html#93" class="Record Operator">=&gt;</a> <a data-type="Category" id="11057" href="Category.SET.html#216" class="Function">SET</a>
  <a id="11063" href="blog/sheafs/index.html#11040" class="Function">ex-func</a> <a id="11071" class="Symbol">.</a><a data-type="C =&gt; D â†’ Obj C â†’ Obj D" id="11072" href="Category.MyFunctor.html#152" class="Field">F-Obj</a> <a id="11078" href="blog/sheafs/index.html#11078" class="Bound">x</a> <a id="11080" class="Symbol">=</a> <a id="11082" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a data-type="Set" id="11086" href="Agda.Builtin.Int.html#246" class="Datatype">â„¤</a> <a id="11088" href="blog/sheafs/index.html#11078" class="Bound">x</a>
  <a id="11092" href="blog/sheafs/index.html#11040" class="Function">ex-func</a> <a id="11100" class="Symbol">.</a><a data-type="(r : C =&gt; D) â†’ C [ A , B ] â†’ D [ F-Obj r A , F-Obj r B ]" id="11101" href="Category.MyFunctor.html#178" class="Field">F-map</a> <a id="11107" href="blog/sheafs/index.html#11107" class="Bound">f</a> <a id="11109" class="Symbol">=</a> <a id="11111" href="blog/sheafs/index.html#11107" class="Bound">f</a> <a id="11113" class="Symbol">.</a><a data-type="LinMap m n â†’ Vec Int m â†’ Vec Int n" id="11114" href="Category.LIN.html#344" class="Field">linmap</a>
  <a id="11123" href="blog/sheafs/index.html#11040" class="Function">ex-func</a> <a id="11131" class="Symbol">.</a><a data-type="(r : C =&gt; D) (A : Obj C) â†’ D [ F-map r (id C) â‰ˆ id D ]" id="11132" href="Category.MyFunctor.html#245" class="Field">F-map-id</a> <a id="11141" class="Symbol">_</a> <a id="11143" class="Symbol">_</a> <a id="11145" class="Symbol">=</a> <a id="11147" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="11154" href="blog/sheafs/index.html#11040" class="Function">ex-func</a> <a id="11162" class="Symbol">.</a><a data-type="(r : C =&gt; D) (g : C [ Y , Zâ‚ ]) (f : C [ X , Y ]) â†’
D [ F-map r (C [ g âˆ˜ f ]) â‰ˆ D [ F-map r g âˆ˜ F-map r f ] ]" id="11163" href="Category.MyFunctor.html#354" class="Field">F-map-âˆ˜</a> <a id="11171" href="blog/sheafs/index.html#11171" class="Bound">g</a> <a id="11173" href="blog/sheafs/index.html#11173" class="Bound">f</a> <a id="11175" href="blog/sheafs/index.html#11175" class="Bound">a</a> <a id="11177" class="Symbol">=</a> <a id="11179" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre>
<p>And we can try again with <code>Section</code>s:</p>
<p>and then we can say a <code>Section</code> is an element of the action of <span class="Agda"><a href="blog/sheafs/index.html#11418" class="Bound">Func</a></span>:</p>
<!--
<pre class="Agda"><a id="11316" class="Keyword">import</a> <a id="11323" href="Category.MyFunctor.html" class="Module">Category.MyFunctor</a>
<a id="11342" class="Keyword">module</a> <a id="Sections"></a><a id="11349" href="blog.sheafs.html#11349" class="Module">Sections</a>
         <a id="11367" class="Symbol">{</a><a id="11368" href="blog.sheafs.html#11368" class="Bound">pre</a> <a id="11372" class="Symbol">:</a> <a id="11374" href="blog.sheafs.html#3012" class="Record">Preorder</a><a id="11382" class="Symbol">}</a>
         <a id="11393" class="Symbol">{</a><a id="11394" href="blog.sheafs.html#11394" class="Bound">C</a> <a id="11396" class="Symbol">:</a> <a id="11398" href="Categories.html#257" class="Record">Category</a><a id="11406" class="Symbol">}</a>
         <a id="11417" class="Symbol">(</a><a id="11418" href="blog.sheafs.html#11418" class="Bound">Func</a> <a id="11423" class="Symbol">:</a> <a id="11425" href="blog.sheafs.html#11394" class="Bound">C</a> <a id="11427" href="Category.MyFunctor.html#93" class="Record Operator">Category.MyFunctor.=&gt;</a> <a id="11449" href="Category.SET.html#216" class="Function">SET</a><a id="11452" class="Symbol">)</a>
         <a id="11463" class="Symbol">(</a><a id="11464" href="blog.sheafs.html#11464" class="Bound">sheaf</a> <a id="11470" class="Symbol">:</a> <a id="11472" href="blog.sheafs.html#5813" class="Record">Sheaf.Sheaf</a> <a id="11484" href="blog.sheafs.html#11368" class="Bound">pre</a> <a id="11488" href="blog.sheafs.html#11394" class="Bound">C</a><a id="11489" class="Symbol">)</a> <a id="11491" class="Keyword">where</a>
  <a id="11499" class="Keyword">open</a> <a id="11504" href="blog.sheafs.html#3012" class="Module">Preorder</a> <a id="11513" href="blog.sheafs.html#11368" class="Bound">pre</a>
  <a id="11519" class="Keyword">open</a> <a id="11524" href="blog.sheafs.html#5813" class="Module">Sheaf.Sheaf</a> <a id="11536" href="blog.sheafs.html#11464" class="Bound">sheaf</a>
  <a id="11544" class="Keyword">open</a> <a id="11549" href="Category.MyFunctor.html#93" class="Module Operator">Category.MyFunctor._=&gt;_</a> <a id="11573" href="blog.sheafs.html#11418" class="Bound">Func</a>
  <a id="11580" class="Keyword">open</a> <a id="11585" href="Categories.html#257" class="Module">Category</a> <a id="11594" href="Category.SET.html#216" class="Function">SET</a>
  <a id="11600" class="Keyword">open</a> <a id="11605" class="Keyword">import</a> <a id="11612" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="11650" class="Keyword">using</a> <a id="11656" class="Symbol">(</a><a id="11657" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_â‰¡_</a><a id="11660" class="Symbol">)</a>
</pre>-->
<pre class="Agda">  <a id="Sections.Section"></a><a id="11677" href="blog/sheafs/index.html#11677" class="Function">Section</a> <a id="11685" class="Symbol">:</a> <a id="11687" href="blog/sheafs/index.html#3045" class="Function">Carrier</a> <a id="11695" class="Symbol">â†’</a> <a data-type="Setâ‚" id="11697" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="11703" href="blog/sheafs/index.html#11677" class="Function">Section</a> <a id="11711" href="blog/sheafs/index.html#11711" class="Bound">c</a> <a id="11713" class="Symbol">=</a> <a data-type="C =&gt; D â†’ Obj C â†’ Obj D" id="11715" href="Category.MyFunctor.html#152" class="Function">F-Obj</a> <a id="11721" class="Symbol">(</a><a id="11722" href="blog/sheafs/index.html#5847" class="Field">Stalk</a> <a id="11728" href="blog/sheafs/index.html#11711" class="Bound">c</a><a id="11729" class="Symbol">)</a>
</pre>
<p>and a <code>GlobalSection</code>, which recall, is a globally-coherent assignment of sections:</p>
<pre class="Agda">  <a id="11827" class="Keyword">record</a> <a id="Sections.GlobalSection"></a><a id="11834" href="blog/sheafs/index.html#11834" class="Record">GlobalSection</a> <a id="11848" class="Symbol">:</a> <a data-type="Setâ‚" id="11850" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="11854" class="Keyword">where</a>
    <a id="11864" class="Keyword">field</a>
      <a id="Sections.GlobalSection.section"></a><a id="11876" href="blog/sheafs/index.html#11876" class="Field">section</a> <a id="11884" class="Symbol">:</a> <a id="11886" class="Symbol">forall</a> <a id="11893" class="Symbol">(</a><a id="11894" href="blog/sheafs/index.html#11894" class="Bound">c</a> <a id="11896" class="Symbol">:</a> <a id="11898" href="blog/sheafs/index.html#3045" class="Function">Carrier</a><a id="11905" class="Symbol">)</a> <a id="11907" class="Symbol">â†’</a> <a id="11909" href="blog/sheafs/index.html#11677" class="Function">Section</a> <a id="11917" href="blog/sheafs/index.html#11894" class="Bound">c</a>
      <a id="Sections.GlobalSection.commutes"></a><a id="11925" href="blog/sheafs/index.html#11925" class="Field">commutes</a>
        <a id="11942" class="Symbol">:</a> <a id="11944" class="Symbol">{</a><a id="11945" href="blog/sheafs/index.html#11945" class="Bound">x</a> <a id="11947" href="blog/sheafs/index.html#11947" class="Bound">y</a> <a id="11949" class="Symbol">:</a> <a id="11951" href="blog/sheafs/index.html#3045" class="Function">Carrier</a><a id="11958" class="Symbol">}</a>
        <a id="11968" class="Symbol">â†’</a> <a id="11970" class="Symbol">(</a><a id="11971" href="blog/sheafs/index.html#11971" class="Bound">x&lt;y</a> <a id="11975" class="Symbol">:</a> <a id="11977" href="blog/sheafs/index.html#11945" class="Bound">x</a> <a id="11979" href="blog/sheafs/index.html#3063" class="Function Operator">&lt;</a> <a id="11981" href="blog/sheafs/index.html#11947" class="Bound">y</a><a id="11982" class="Symbol">)</a>
        <a id="11992" class="Symbol">â†’</a> <a data-type="(r : C =&gt; D) â†’ C [ A , B ] â†’ D [ F-Obj r A , F-Obj r B ]" id="11994" href="Category.MyFunctor.html#178" class="Function">F-map</a> <a id="12000" class="Symbol">(</a><a id="12001" href="blog/sheafs/index.html#5875" class="Field">restrict</a> <a id="12010" href="blog/sheafs/index.html#11971" class="Bound">x&lt;y</a><a id="12013" class="Symbol">)</a> <a id="12015" class="Symbol">(</a><a id="12016" href="blog/sheafs/index.html#11876" class="Field">section</a> <a id="12024" href="blog/sheafs/index.html#11947" class="Bound">y</a><a id="12025" class="Symbol">)</a> <a id="12027" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">â‰¡</a> <a id="12029" href="blog/sheafs/index.html#11876" class="Field">section</a> <a id="12037" href="blog/sheafs/index.html#11945" class="Bound">x</a>
</pre>
<!--
<pre class="Agda"><a id="12053" class="Keyword">module</a> <a id="GoodEx"></a><a id="12060" href="blog.sheafs.html#12060" class="Module">GoodEx</a> <a id="12067" class="Keyword">where</a>
  <a id="12075" class="Keyword">open</a> <a id="12080" href="blog.sheafs.html#5721" class="Module">Sheaf</a> <a id="12086" href="blog.sheafs.html#3955" class="Function">ex-preorder</a> <a id="12098" href="Category.LIN.html#591" class="Function">LIN</a>
  <a id="12104" class="Keyword">open</a> <a id="12109" href="blog.sheafs.html#5813" class="Module">Sheaf.Sheaf</a> <a id="12121" href="blog.sheafs.html#7081" class="Function">ex</a>
  <a id="12126" class="Keyword">open</a> <a id="12131" href="blog.sheafs.html#11349" class="Module">Sections</a> <a id="12140" href="blog.sheafs.html#11040" class="Function">ex-func</a> <a id="12148" href="blog.sheafs.html#7081" class="Function">ex</a>
  <a id="12153" class="Keyword">open</a> <a id="12158" href="blog.sheafs.html#11834" class="Module">GlobalSection</a>
  <a id="12174" class="Keyword">open</a> <a id="12179" href="Category.MyFunctor.html#93" class="Module Operator">Category.MyFunctor._=&gt;_</a> <a id="12203" href="blog.sheafs.html#11040" class="Function">ex-func</a>
</pre>-->
<pre class="Agda">  <a id="GoodEx.soln"></a><a id="12226" href="blog/sheafs/index.html#12226" class="Function">soln</a> <a id="12231" class="Symbol">:</a> <a id="12233" href="blog/sheafs/index.html#11834" class="Record">GlobalSection</a>
  <a id="12249" href="blog/sheafs/index.html#12226" class="Function">soln</a> <a id="12254" class="Symbol">.</a><a id="12255" href="blog/sheafs/index.html#11876" class="Field">section</a> <a id="12263" href="blog/sheafs/index.html#3402" class="InductiveConstructor">v1</a> <a id="12266" class="Symbol">=</a> <a data-type="Nat â†’ Int" id="12268" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="12270" class="Number">2</a> <a id="12272" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a data-type="Nat â†’ Int" id="12274" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="12276" class="Number">1</a> <a id="12278" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a id="12280" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a>
  <a id="12285" href="blog/sheafs/index.html#12226" class="Function">soln</a> <a id="12290" class="Symbol">.</a><a id="12291" href="blog/sheafs/index.html#11876" class="Field">section</a> <a id="12299" href="blog/sheafs/index.html#3413" class="InductiveConstructor">v2</a> <a id="12302" class="Symbol">=</a> <a data-type="Nat â†’ Int" id="12304" href="Agda.Builtin.Int.html#291" class="InductiveConstructor Operator">-[1+</a> <a id="12309" class="Number">1</a> <a data-type="Nat â†’ Int" id="12311" href="Agda.Builtin.Int.html#291" class="InductiveConstructor Operator">]</a> <a id="12313" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a data-type="Nat â†’ Int" id="12315" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="12317" class="Number">10</a> <a id="12320" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a data-type="Nat â†’ Int" id="12322" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="12324" class="Number">3</a> <a id="12326" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a id="12328" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a>
  <a id="12333" href="blog/sheafs/index.html#12226" class="Function">soln</a> <a id="12338" class="Symbol">.</a><a id="12339" href="blog/sheafs/index.html#11876" class="Field">section</a> <a id="12347" href="blog/sheafs/index.html#3424" class="InductiveConstructor">e12</a> <a id="12351" class="Symbol">=</a> <a data-type="Nat â†’ Int" id="12353" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="12355" class="Number">1</a> <a id="12357" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a data-type="Nat â†’ Int" id="12359" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="12361" class="Number">2</a> <a id="12363" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">âˆ·</a> <a id="12365" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a>
  <a id="12370" href="blog/sheafs/index.html#12226" class="Function">soln</a> <a id="12375" class="Symbol">.</a><a id="12376" href="blog/sheafs/index.html#11925" class="Field">commutes</a> <a id="12385" href="blog/sheafs/index.html#3742" class="InductiveConstructor">e12&lt;v1</a> <a id="12392" class="Symbol">=</a> <a id="12394" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="12401" href="blog/sheafs/index.html#12226" class="Function">soln</a> <a id="12406" class="Symbol">.</a><a id="12407" href="blog/sheafs/index.html#11925" class="Field">commutes</a> <a id="12416" href="blog/sheafs/index.html#3764" class="InductiveConstructor">e12&lt;v2</a> <a id="12423" class="Symbol">=</a> <a id="12425" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="12432" href="blog/sheafs/index.html#12226" class="Function">soln</a> <a id="12437" class="Symbol">.</a><a id="12438" href="blog/sheafs/index.html#11925" class="Field">commutes</a> <a id="12447" class="Symbol">(</a><a id="12448" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="12457" class="Symbol">_)</a> <a id="12460" class="Symbol">=</a> <a id="12462" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre>
<p>Sure enough, this was a global section:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>âˆˆ</mo><mtext>StalkÂ </mtext><mi>v</mi><mn>1</mn></mrow><annotation encoding="application/x-tex">
\begin{bmatrix}
2 \\ 1
\end{bmatrix}
\in \text{Stalk } v1
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">StalkÂ </span></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord">1</span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>âˆˆ</mo><mtext>StalkÂ </mtext><mi>v</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">
\begin{bmatrix}
-2 \\ 10 \\ 3
\end{bmatrix}
\in \text{Stalk } v2
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-2.25em;"><span class="pstrut" style="height:3.155em;"></span><span class="delimsizinginner delim-size4"><span>â£</span></span></span><span style="top:-3.397em;"><span class="pstrut" style="height:3.155em;"></span><span style="height:0.016em;width:0.6667em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.6667em" height="0.016em" style="width:0.6667em" viewBox="0 0 666.67 16" preserveAspectRatio="xMinYMin"><path d="M319 0 H403 V16 H319z M319 0 H403 V16 H319z"></path></svg></span></span><span style="top:-4.05em;"><span class="pstrut" style="height:3.155em;"></span><span class="delimsizinginner delim-size4"><span>â¡</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">2</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">10</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-2.25em;"><span class="pstrut" style="height:3.155em;"></span><span class="delimsizinginner delim-size4"><span>â¦</span></span></span><span style="top:-3.397em;"><span class="pstrut" style="height:3.155em;"></span><span style="height:0.016em;width:0.6667em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.6667em" height="0.016em" style="width:0.6667em" viewBox="0 0 666.67 16" preserveAspectRatio="xMinYMin"><path d="M263 0 H347 V16 H263z M263 0 H347 V16 H263z"></path></svg></span></span><span style="top:-4.05em;"><span class="pstrut" style="height:3.155em;"></span><span class="delimsizinginner delim-size4"><span>â¤</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">StalkÂ </span></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord">2</span></span></span></span></span></p>
<p>and</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>âˆˆ</mo><mtext>StalkÂ </mtext><mi>e</mi><mn>12</mn></mrow><annotation encoding="application/x-tex">
\begin{bmatrix}
1 \\ 2
\end{bmatrix}
\in \text{Stalk } e12
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">StalkÂ </span></span><span class="mord mathnormal">e</span><span class="mord">12</span></span></span></span></span></p>
<h2 id="example-continuous-intervals"><a href="#example-continuous-intervals" class="header-link">Example: Continuous Intervals<span class="header-link-emoji">ğŸ”—</span></a></h2>
<p>The paper presents a second example as well. Maybe itâ€™s just that Iâ€™m less well-versed in the subject matter, but this example feels significantly more incoherent than the first. I tried to work through it, and the formalization above was sufficiently powerful to do what I needed, but I didnâ€™t understand the example or what it was trying to accomplish. There was some Abelian group stuff that never actually got used.</p>
<p>Rather than clean this section up, Iâ€™m instead going to spend the time before my publication deadline writing about what I learned about pre-sheafs after hitting the wall, and asking for help.</p>
<h2 id="extracuricular-presheafs"><a href="#extracuricular-presheafs" class="header-link">Extracuricular Presheafs<span class="header-link-emoji">ğŸ”—</span></a></h2>
<p>So letâ€™s talk about what all of this sheaf business above is trying to do. The ever helpful Reed Mullanix came to my rescue with a few helpful intuitions. To paraphrase him (if there are any mistakes in the following, they are my mistakes, not his):</p>
<blockquote>
<p>Think about a sensor network. You have some physical space, with a series of sensors attached in specific places. Maybe you have a microphone in the hallway, and a camera at the front door, and a thermometer in the bedroom. Each of these sensors is <em>locally correct</em>, that is, we can be reasonably sure that if the thermometer says 37C, it is in fact 37C.</p>
<p>A presheaf is a mapping from this collection of sensors to a world in which we can reason about the total space. For example, we might want to get an idea of whatâ€™s going on in the basement, where we have no sensors, but which is part of our house nevertheless.</p>
<p>And a global section over that presheaf is a globally consistent take on the system. Itâ€™s some mapping into the hypothesis space that <em>agrees with all of the measurements.</em> If we know itâ€™s 37C in the bedroom, weâ€™re probably not going to see snow in the front-door camera.</p>
</blockquote>
<p>Okay, so whatâ€™s all this preorder stuff about? I think itâ€™s actually just a poor manâ€™s category. We can lift any preorder into a category by considering the <code>&lt;</code> relationship to be a morphism:</p>
<pre class="Agda"><a id="14770" class="Keyword">module</a> <a id="PreorderToCategory"></a><a id="14777" href="blog/sheafs/index.html#14777" class="Module">PreorderToCategory</a> <a id="14796" class="Symbol">(</a><a id="14797" href="blog/sheafs/index.html#14797" class="Bound">P</a> <a id="14799" class="Symbol">:</a> <a id="14801" href="blog/sheafs/index.html#3012" class="Record">Preorder</a><a id="14809" class="Symbol">)</a> <a id="14811" class="Keyword">where</a>
  <a id="14819" class="Keyword">open</a> <a id="14824" href="blog/sheafs/index.html#3012" class="Module">Preorder</a> <a id="14833" href="blog/sheafs/index.html#14797" class="Bound">P</a>
  <a id="14837" class="Keyword">open</a> <a data-type="Set" id="14842" href="Categories.html#257" class="Module">Category</a>

  <a id="14854" class="Keyword">open</a> <a id="14859" class="Keyword">import</a> <a id="14866" href="Data.Unit.html" class="Module">Data.Unit</a> <a id="14876" class="Keyword">using</a> <a id="14882" class="Symbol">(</a><a data-type="Set" id="14883" href="Agda.Builtin.Unit.html#164" class="Record">âŠ¤</a><a id="14884" class="Symbol">;</a> <a data-type="âŠ¤" id="14886" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="14888" class="Symbol">)</a>

  <a id="PreorderToCategory.cat"></a><a id="14893" href="blog/sheafs/index.html#14893" class="Function">cat</a> <a id="14897" class="Symbol">:</a> <a data-type="Set" id="14899" href="Categories.html#257" class="Record">Category</a>
  <a id="14910" href="blog/sheafs/index.html#14893" class="Function">cat</a> <a id="14914" class="Symbol">.</a><a data-type="Category â†’ Set" id="14915" href="Categories.html#362" class="Field">Obj</a> <a id="14919" class="Symbol">=</a> <a id="14921" href="blog/sheafs/index.html#3045" class="Field">Carrier</a>
  <a id="14931" href="blog/sheafs/index.html#14893" class="Function">cat</a> <a id="14935" class="Symbol">.</a><a data-type="(r : Category) â†’ Obj r â†’ Obj r â†’ Set" id="14936" href="Categories.html#376" class="Field Operator">_~&gt;_</a> <a id="14941" class="Symbol">=</a> <a id="14943" href="blog/sheafs/index.html#3063" class="Field Operator">_&lt;_</a>
  <a id="14949" href="blog/sheafs/index.html#14893" class="Function">cat</a> <a id="14953" class="Symbol">.</a><a data-type="(r : Category) â†’ (r ~&gt; A) B â†’ (r ~&gt; A) B â†’ Set" id="14954" href="Categories.html#450" class="Field Operator">_â‰ˆ_</a> <a id="14958" href="blog/sheafs/index.html#14958" class="Bound">f</a> <a id="14960" href="blog/sheafs/index.html#14960" class="Bound">g</a> <a id="14962" class="Symbol">=</a> <a data-type="Set" id="14964" href="Agda.Builtin.Unit.html#164" class="Record">âŠ¤</a>
  <a id="14968" href="blog/sheafs/index.html#14893" class="Function">cat</a> <a id="14972" class="Symbol">.</a><a data-type="(r : Category) â†’ IsEquivalence (_â‰ˆ_ r)" id="14973" href="Categories.html#565" class="Field">â‰ˆ-equiv</a> <a id="14981" class="Symbol">=</a> <a id="14983" href="blog/sheafs/index.html#6436" class="Postulate">sorry</a>
  <a id="14991" href="blog/sheafs/index.html#14893" class="Function">cat</a> <a id="14995" class="Symbol">.</a><a data-type="(r : Category) â†’ (r ~&gt; A) A" id="14996" href="Categories.html#648" class="Field">id</a> <a id="14999" class="Symbol">{</a><a id="15000" class="Argument">A</a> <a id="15002" class="Symbol">=</a> <a id="15004" href="blog/sheafs/index.html#15004" class="Bound">A</a><a id="15005" class="Symbol">}</a> <a id="15007" class="Symbol">=</a> <a id="15009" href="blog/sheafs/index.html#3097" class="Field">&lt;-refl</a> <a id="15016" href="blog/sheafs/index.html#15004" class="Bound">A</a>
  <a id="15020" href="blog/sheafs/index.html#14893" class="Function">cat</a> <a id="15024" class="Symbol">.</a><a data-type="(r : Category) â†’ (r ~&gt; B) C â†’ (r ~&gt; A) B â†’ (r ~&gt; A) C" id="15025" href="Categories.html#676" class="Field Operator">_âˆ˜_</a> <a id="15029" href="blog/sheafs/index.html#15029" class="Bound">g</a> <a id="15031" href="blog/sheafs/index.html#15031" class="Bound">f</a> <a id="15033" class="Symbol">=</a> <a id="15035" href="blog/sheafs/index.html#3132" class="Field">&lt;-trans</a> <a id="15043" href="blog/sheafs/index.html#15031" class="Bound">f</a> <a id="15045" href="blog/sheafs/index.html#15029" class="Bound">g</a>
  <a id="15049" href="blog/sheafs/index.html#14893" class="Function">cat</a> <a id="15053" class="Symbol">.</a><a data-type="(r : Category) â†’
(r â‰ˆ g) g&#39; â†’ (r â‰ˆ f) f&#39; â†’ (r â‰ˆ (r âˆ˜ g) f) ((r âˆ˜ g&#39;) f&#39;)" id="15054" href="Categories.html#728" class="Field">âˆ˜-cong</a> <a id="15061" class="Symbol">=</a> <a id="15063" class="Symbol">Î»</a> <a id="15065" href="blog/sheafs/index.html#15065" class="Bound">_</a> <a id="15067" href="blog/sheafs/index.html#15067" class="Bound">_</a> <a id="15069" class="Symbol">â†’</a> <a data-type="âŠ¤" id="15071" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
  <a id="15076" href="blog/sheafs/index.html#14893" class="Function">cat</a> <a id="15080" class="Symbol">.</a><a data-type="(r : Category) (f : (r ~&gt; A) B) â†’ (r â‰ˆ (r âˆ˜ f) (id r)) f" id="15081" href="Categories.html#864" class="Field">id-r</a> <a id="15086" href="blog/sheafs/index.html#15086" class="Bound">f</a> <a id="15088" class="Symbol">=</a> <a data-type="âŠ¤" id="15090" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
  <a id="15095" href="blog/sheafs/index.html#14893" class="Function">cat</a> <a id="15099" class="Symbol">.</a><a data-type="(r : Category) (f : (r ~&gt; A) B) â†’ (r â‰ˆ (r âˆ˜ id r) f) f" id="15100" href="Categories.html#913" class="Field">id-l</a> <a id="15105" href="blog/sheafs/index.html#15105" class="Bound">f</a> <a id="15107" class="Symbol">=</a> <a data-type="âŠ¤" id="15109" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
  <a id="15114" href="blog/sheafs/index.html#14893" class="Function">cat</a> <a id="15118" class="Symbol">.</a><a data-type="(r : Category) (h : (r ~&gt; C) D) (g : (r ~&gt; B) C) (f : (r ~&gt; A) B) â†’
(r â‰ˆ (r âˆ˜ h) ((r âˆ˜ g) f)) ((r âˆ˜ (r âˆ˜ h) g) f)" id="15119" href="Categories.html#962" class="Field">âˆ˜-assoc</a> <a id="15127" href="blog/sheafs/index.html#15127" class="Bound">h</a> <a id="15129" href="blog/sheafs/index.html#15129" class="Bound">g</a> <a id="15131" href="blog/sheafs/index.html#15131" class="Bound">f</a> <a id="15133" class="Symbol">=</a> <a data-type="âŠ¤" id="15135" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
</pre>
<p>and now that we have a <span class="Agda"><a data-type="Set" href="Categories.html#257" class="Record">Category</a></span>, we can avoid the whole <span class="Agda"><a href="blog/sheafs/index.html#5721" class="Module">Sheaf</a></span> / <span class="Agda"><a href="blog/sheafs/index.html#9595" class="Record">GlobalSection</a></span> by giving a functor into <span class="Agda"><a data-type="Category" href="Category.SET.html#216" class="Function">SET</a></span>. Well, almost, because <span class="Agda"><a href="Data.Vec.Base.html#3807" class="Function">restrict</a></span> goes the opposite direction. So instead, we can build an opposite category:</p>
<pre class="Agda"><a id="15408" class="Keyword">module</a> <a id="Op"></a><a id="15415" href="blog/sheafs/index.html#15415" class="Module">Op</a> <a id="15418" class="Symbol">(</a><a id="15419" href="blog/sheafs/index.html#15419" class="Bound">C</a> <a id="15421" class="Symbol">:</a> <a data-type="Set" id="15423" href="Categories.html#257" class="Record">Category</a><a id="15431" class="Symbol">)</a> <a id="15433" class="Keyword">where</a>
  <a id="15441" class="Keyword">open</a> <a data-type="Set" id="15446" href="Categories.html#257" class="Module">Category</a>

  <a id="15458" class="Keyword">data</a> <a id="Op.OpArr"></a><a id="15463" href="blog/sheafs/index.html#15463" class="Datatype">OpArr</a> <a id="15469" class="Symbol">:</a> <a data-type="Category â†’ Set" id="15471" href="Categories.html#362" class="Field">Obj</a> <a id="15475" href="blog/sheafs/index.html#15419" class="Bound">C</a> <a id="15477" class="Symbol">â†’</a> <a data-type="Category â†’ Set" id="15479" href="Categories.html#362" class="Field">Obj</a> <a id="15483" href="blog/sheafs/index.html#15419" class="Bound">C</a> <a id="15485" class="Symbol">â†’</a> <a data-type="Setâ‚" id="15487" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="15491" class="Keyword">where</a>
    <a id="Op.OpArr.reverse"></a><a id="15501" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="15509" class="Symbol">:</a> <a id="15511" class="Symbol">{</a><a id="15512" href="blog/sheafs/index.html#15512" class="Bound">X</a> <a id="15514" href="blog/sheafs/index.html#15514" class="Bound">Y</a> <a id="15516" class="Symbol">:</a> <a data-type="Category â†’ Set" id="15518" href="Categories.html#362" class="Field">Obj</a> <a id="15522" href="blog/sheafs/index.html#15419" class="Bound">C</a><a id="15523" class="Symbol">}</a> <a id="15525" class="Symbol">â†’</a> <a id="15527" href="blog/sheafs/index.html#15419" class="Bound">C</a> <a data-type="(C : Category) â†’ Obj C â†’ Obj C â†’ Set" id="15529" href="Categories.html#1998" class="Function Operator">[</a> <a id="15531" href="blog/sheafs/index.html#15512" class="Bound">X</a> <a data-type="(C : Category) â†’ Obj C â†’ Obj C â†’ Set" id="15533" href="Categories.html#1998" class="Function Operator">,</a> <a id="15535" href="blog/sheafs/index.html#15514" class="Bound">Y</a> <a data-type="(C : Category) â†’ Obj C â†’ Obj C â†’ Set" id="15537" href="Categories.html#1998" class="Function Operator">]</a> <a id="15539" class="Symbol">â†’</a> <a id="15541" href="blog/sheafs/index.html#15463" class="Datatype">OpArr</a> <a id="15547" href="blog/sheafs/index.html#15514" class="Bound">Y</a> <a id="15549" href="blog/sheafs/index.html#15512" class="Bound">X</a>

  <a id="Op.op"></a><a id="15554" href="blog/sheafs/index.html#15554" class="Function">op</a> <a id="15557" class="Symbol">:</a> <a data-type="Set" id="15559" href="Categories.html#257" class="Record">Category</a>
  <a id="15570" href="blog/sheafs/index.html#15554" class="Function">op</a> <a id="15573" class="Symbol">.</a><a data-type="Category â†’ Set" id="15574" href="Categories.html#362" class="Field">Obj</a> <a id="15578" class="Symbol">=</a> <a id="15580" href="blog/sheafs/index.html#15419" class="Bound">C</a> <a id="15582" class="Symbol">.</a><a data-type="Category â†’ Set" id="15583" href="Categories.html#362" class="Field">Obj</a>
  <a id="15589" href="blog/sheafs/index.html#15554" class="Function">op</a> <a id="15592" class="Symbol">.</a><a data-type="(r : Category) â†’ Obj r â†’ Obj r â†’ Set" id="15593" href="Categories.html#376" class="Field Operator">_~&gt;_</a> <a id="15598" class="Symbol">=</a> <a id="15600" href="blog/sheafs/index.html#15463" class="Datatype">OpArr</a>
  <a id="15608" href="blog/sheafs/index.html#15554" class="Function">op</a> <a id="15611" class="Symbol">.</a><a data-type="(r : Category) â†’ (r ~&gt; A) B â†’ (r ~&gt; A) B â†’ Set" id="15612" href="Categories.html#450" class="Field Operator">_â‰ˆ_</a> <a id="15616" class="Symbol">(</a><a id="15617" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="15625" href="blog/sheafs/index.html#15625" class="Bound">f</a><a id="15626" class="Symbol">)</a> <a id="15628" class="Symbol">(</a><a id="15629" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="15637" href="blog/sheafs/index.html#15637" class="Bound">g</a><a id="15638" class="Symbol">)</a> <a id="15640" class="Symbol">=</a> <a id="15642" href="blog/sheafs/index.html#15419" class="Bound">C</a> <a id="15644" class="Symbol">.</a><a data-type="(r : Category) â†’ (r ~&gt; A) B â†’ (r ~&gt; A) B â†’ Set" id="15645" href="Categories.html#450" class="Field Operator">_â‰ˆ_</a> <a id="15649" href="blog/sheafs/index.html#15625" class="Bound">f</a> <a id="15651" href="blog/sheafs/index.html#15637" class="Bound">g</a>
  <a id="15655" href="blog/sheafs/index.html#15554" class="Function">op</a> <a id="15658" class="Symbol">.</a><a data-type="(r : Category) â†’ IsEquivalence (_â‰ˆ_ r)" id="15659" href="Categories.html#565" class="Field">â‰ˆ-equiv</a> <a id="15667" class="Symbol">{</a><a id="15668" href="blog/sheafs/index.html#15668" class="Bound">A</a><a id="15669" class="Symbol">}</a> <a id="15671" class="Symbol">{</a><a id="15672" href="blog/sheafs/index.html#15672" class="Bound">B</a><a id="15673" class="Symbol">}</a> <a id="15675" class="Symbol">=</a> <a id="15677" href="blog/sheafs/index.html#6436" class="Postulate">sorry</a>
  <a id="15685" href="blog/sheafs/index.html#15554" class="Function">op</a> <a id="15688" class="Symbol">.</a><a data-type="(r : Category) â†’ (r ~&gt; A) A" id="15689" href="Categories.html#648" class="Field">id</a> <a id="15692" class="Symbol">=</a> <a id="15694" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="15702" class="Symbol">(</a><a id="15703" href="blog/sheafs/index.html#15419" class="Bound">C</a> <a id="15705" class="Symbol">.</a><a data-type="(r : Category) â†’ (r ~&gt; A) A" id="15706" href="Categories.html#648" class="Field">id</a><a id="15708" class="Symbol">)</a>
  <a id="15712" href="blog/sheafs/index.html#15554" class="Function">op</a> <a id="15715" class="Symbol">.</a><a data-type="(r : Category) â†’ (r ~&gt; B) C â†’ (r ~&gt; A) B â†’ (r ~&gt; A) C" id="15716" href="Categories.html#676" class="Field Operator">_âˆ˜_</a> <a id="15720" class="Symbol">(</a><a id="15721" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="15729" href="blog/sheafs/index.html#15729" class="Bound">g</a><a id="15730" class="Symbol">)</a> <a id="15732" class="Symbol">(</a><a id="15733" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="15741" href="blog/sheafs/index.html#15741" class="Bound">f</a><a id="15742" class="Symbol">)</a> <a id="15744" class="Symbol">=</a> <a id="15746" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="15754" class="Symbol">(</a><a id="15755" href="blog/sheafs/index.html#15419" class="Bound">C</a> <a id="15757" class="Symbol">.</a><a data-type="(r : Category) â†’ (r ~&gt; B) C â†’ (r ~&gt; A) B â†’ (r ~&gt; A) C" id="15758" href="Categories.html#676" class="Field Operator">_âˆ˜_</a> <a id="15762" href="blog/sheafs/index.html#15741" class="Bound">f</a> <a id="15764" href="blog/sheafs/index.html#15729" class="Bound">g</a><a id="15765" class="Symbol">)</a>
  <a id="15769" href="blog/sheafs/index.html#15554" class="Function">op</a> <a id="15772" class="Symbol">.</a><a data-type="(r : Category) â†’
(r â‰ˆ g) g&#39; â†’ (r â‰ˆ f) f&#39; â†’ (r â‰ˆ (r âˆ˜ g) f) ((r âˆ˜ g&#39;) f&#39;)" id="15773" href="Categories.html#728" class="Field">âˆ˜-cong</a> <a id="15780" class="Symbol">=</a> <a id="15782" href="blog/sheafs/index.html#6436" class="Postulate">sorry</a>
  <a id="15790" href="blog/sheafs/index.html#15554" class="Function">op</a> <a id="15793" class="Symbol">.</a><a data-type="(r : Category) (f : (r ~&gt; A) B) â†’ (r â‰ˆ (r âˆ˜ f) (id r)) f" id="15794" href="Categories.html#864" class="Field">id-r</a> <a id="15799" class="Symbol">(</a><a id="15800" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="15808" href="blog/sheafs/index.html#15808" class="Bound">f</a><a id="15809" class="Symbol">)</a> <a id="15811" class="Symbol">=</a> <a id="15813" href="blog/sheafs/index.html#15419" class="Bound">C</a> <a id="15815" class="Symbol">.</a><a data-type="(r : Category) (f : (r ~&gt; A) B) â†’ (r â‰ˆ (r âˆ˜ id r) f) f" id="15816" href="Categories.html#913" class="Field">id-l</a> <a id="15821" href="blog/sheafs/index.html#15808" class="Bound">f</a>
  <a id="15825" href="blog/sheafs/index.html#15554" class="Function">op</a> <a id="15828" class="Symbol">.</a><a data-type="(r : Category) (f : (r ~&gt; A) B) â†’ (r â‰ˆ (r âˆ˜ id r) f) f" id="15829" href="Categories.html#913" class="Field">id-l</a> <a id="15834" class="Symbol">(</a><a id="15835" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="15843" href="blog/sheafs/index.html#15843" class="Bound">f</a><a id="15844" class="Symbol">)</a> <a id="15846" class="Symbol">=</a> <a id="15848" href="blog/sheafs/index.html#15419" class="Bound">C</a> <a id="15850" class="Symbol">.</a><a data-type="(r : Category) (f : (r ~&gt; A) B) â†’ (r â‰ˆ (r âˆ˜ f) (id r)) f" id="15851" href="Categories.html#864" class="Field">id-r</a> <a id="15856" href="blog/sheafs/index.html#15843" class="Bound">f</a>
  <a id="15860" href="blog/sheafs/index.html#15554" class="Function">op</a> <a id="15863" class="Symbol">.</a><a data-type="(r : Category) (h : (r ~&gt; C) D) (g : (r ~&gt; B) C) (f : (r ~&gt; A) B) â†’
(r â‰ˆ (r âˆ˜ h) ((r âˆ˜ g) f)) ((r âˆ˜ (r âˆ˜ h) g) f)" id="15864" href="Categories.html#962" class="Field">âˆ˜-assoc</a> <a id="15872" class="Symbol">(</a><a id="15873" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="15881" href="blog/sheafs/index.html#15881" class="Bound">h</a><a id="15882" class="Symbol">)</a> <a id="15884" class="Symbol">(</a><a id="15885" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="15893" href="blog/sheafs/index.html#15893" class="Bound">g</a><a id="15894" class="Symbol">)</a> <a id="15896" class="Symbol">(</a><a id="15897" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="15905" href="blog/sheafs/index.html#15905" class="Bound">f</a><a id="15906" class="Symbol">)</a> <a id="15908" class="Symbol">=</a>
    <a data-type="(r : Category) â†’ Setoid lzero lzero" id="15914" href="Categories.html#1389" class="Function">setoid</a> <a id="15921" href="blog/sheafs/index.html#15419" class="Bound">C</a> <a id="15923" class="Symbol">.</a><a id="15924" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>
             <a id="15951" class="Symbol">.</a><a id="15952" href="Relation.Binary.Structures.html#1594" class="Field">S.IsEquivalence.sym</a> <a id="15972" class="Symbol">(</a><a id="15973" href="blog/sheafs/index.html#15419" class="Bound">C</a> <a id="15975" class="Symbol">.</a><a data-type="(r : Category) (h : (r ~&gt; C) D) (g : (r ~&gt; B) C) (f : (r ~&gt; A) B) â†’
(r â‰ˆ (r âˆ˜ h) ((r âˆ˜ g) f)) ((r âˆ˜ (r âˆ˜ h) g) f)" id="15976" href="Categories.html#962" class="Field">âˆ˜-assoc</a> <a id="15984" href="blog/sheafs/index.html#15905" class="Bound">f</a> <a id="15986" href="blog/sheafs/index.html#15893" class="Bound">g</a> <a id="15988" href="blog/sheafs/index.html#15881" class="Bound">h</a><a id="15989" class="Symbol">)</a>
    <a id="15995" class="Keyword">where</a>
      <a id="16007" class="Keyword">open</a> <a id="16012" class="Keyword">import</a> <a id="16019" href="Relation.Binary.Bundles.html" class="Module">Relation.Binary.Bundles</a> <a id="16043" class="Keyword">using</a> <a id="16049" class="Symbol">(</a><a id="16050" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a><a id="16056" class="Symbol">)</a>
      <a id="16064" class="Keyword">open</a> <a id="16069" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="16076" class="Keyword">using</a> <a id="16082" class="Symbol">(</a><a id="16083" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a><a id="16096" class="Symbol">)</a>
      <a id="16104" class="Keyword">import</a> <a id="16111" href="Relation.Binary.Structures.html" class="Module">Relation.Binary.Structures</a> <a id="16138" class="Symbol">as</a> <a id="16141" class="Module">S</a>
</pre>
<p>Now, we can express a presheaf as a functor:</p>
<pre class="Agda"><a id="16198" class="Keyword">module</a> <a id="16205" href="blog/sheafs/index.html#16205" class="Module">_</a> <a id="16207" class="Keyword">where</a>
  <a id="16215" class="Keyword">open</a> <a id="16220" class="Keyword">import</a> <a id="16227" href="Category.MyFunctor.html" class="Module">Category.MyFunctor</a>
  <a id="16248" class="Keyword">open</a> <a id="16253" href="blog/sheafs/index.html#15415" class="Module">Op</a>

  <a id="16259" href="blog/sheafs/index.html#16259" class="Function">Presheaf</a> <a id="16268" class="Symbol">:</a> <a data-type="Set" id="16270" href="Categories.html#257" class="Record">Category</a> <a id="16279" class="Symbol">â†’</a> <a data-type="Setâ‚" id="16281" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="16287" href="blog/sheafs/index.html#16259" class="Function">Presheaf</a> <a id="16296" href="blog/sheafs/index.html#16296" class="Bound">C</a> <a id="16298" class="Symbol">=</a> <a id="16300" href="blog/sheafs/index.html#15554" class="Function">op</a> <a id="16303" href="blog/sheafs/index.html#16296" class="Bound">C</a> <a data-type="(C D : Category) â†’ Set" id="16305" href="Category.MyFunctor.html#93" class="Record Operator">=&gt;</a> <a data-type="Category" id="16308" href="Category.SET.html#216" class="Function">SET</a>
</pre>
<p>or our specific example from earlier:</p>
<pre class="Agda"><a id="16360" class="Keyword">module</a> <a id="16367" href="blog/sheafs/index.html#16367" class="Module">_</a> <a id="16369" class="Keyword">where</a>
  <a id="16377" class="Keyword">open</a> <a id="16382" href="blog/sheafs/index.html#14777" class="Module">PreorderToCategory</a> <a id="16401" href="blog/sheafs/index.html#3955" class="Function">ex-preorder</a>
  <a id="16415" class="Keyword">open</a> <a data-type="(C D : Category) â†’ Set" id="16420" href="Category.MyFunctor.html#93" class="Module Operator">_=&gt;_</a>
  <a id="16427" class="Keyword">open</a> <a id="16432" class="Keyword">import</a> <a id="16439" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="16448" class="Keyword">using</a> <a id="16454" class="Symbol">(</a><a data-type="Set" id="16455" href="Agda.Builtin.Nat.html#192" class="Datatype">â„•</a><a id="16456" class="Symbol">)</a>
  <a id="16460" class="Keyword">open</a> <a id="16465" href="blog/sheafs/index.html#15415" class="Module">Op</a>

  <a id="16471" href="blog/sheafs/index.html#16471" class="Function">Z</a> <a id="16473" class="Symbol">:</a> <a data-type="Set" id="16475" href="Agda.Builtin.Nat.html#192" class="Datatype">â„•</a> <a id="16477" class="Symbol">â†’</a> <a data-type="Setâ‚" id="16479" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="16485" href="blog/sheafs/index.html#16471" class="Function">Z</a> <a id="16487" class="Symbol">=</a> <a id="16489" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a data-type="Set" id="16493" href="Agda.Builtin.Int.html#246" class="Datatype">â„¤</a>

  <a id="16498" href="blog/sheafs/index.html#16498" class="Function">ex&#39;</a> <a id="16502" class="Symbol">:</a> <a id="16504" href="blog/sheafs/index.html#16259" class="Function">Presheaf</a> <a id="16513" href="blog/sheafs/index.html#14893" class="Function">cat</a>
  <a id="16519" href="blog/sheafs/index.html#16498" class="Function">ex&#39;</a> <a id="16523" class="Symbol">.</a><a data-type="C =&gt; D â†’ Obj C â†’ Obj D" id="16524" href="Category.MyFunctor.html#152" class="Field">F-Obj</a> <a id="16530" href="blog/sheafs/index.html#3402" class="InductiveConstructor">v1</a> <a id="16533" class="Symbol">=</a> <a id="16535" href="blog/sheafs/index.html#16471" class="Function">Z</a> <a id="16537" class="Number">2</a>
  <a id="16541" href="blog/sheafs/index.html#16498" class="Function">ex&#39;</a> <a id="16545" class="Symbol">.</a><a data-type="C =&gt; D â†’ Obj C â†’ Obj D" id="16546" href="Category.MyFunctor.html#152" class="Field">F-Obj</a> <a id="16552" href="blog/sheafs/index.html#3413" class="InductiveConstructor">v2</a> <a id="16555" class="Symbol">=</a> <a id="16557" href="blog/sheafs/index.html#16471" class="Function">Z</a> <a id="16559" class="Number">3</a>
  <a id="16563" href="blog/sheafs/index.html#16498" class="Function">ex&#39;</a> <a id="16567" class="Symbol">.</a><a data-type="C =&gt; D â†’ Obj C â†’ Obj D" id="16568" href="Category.MyFunctor.html#152" class="Field">F-Obj</a> <a id="16574" href="blog/sheafs/index.html#3424" class="InductiveConstructor">e12</a> <a id="16578" class="Symbol">=</a> <a id="16580" href="blog/sheafs/index.html#16471" class="Function">Z</a> <a id="16582" class="Number">2</a>
  <a id="16586" href="blog/sheafs/index.html#16498" class="Function">ex&#39;</a> <a id="16590" class="Symbol">.</a><a data-type="(r : C =&gt; D) â†’ C [ A , B ] â†’ D [ F-Obj r A , F-Obj r B ]" id="16591" href="Category.MyFunctor.html#178" class="Field">F-map</a> <a id="16597" class="Symbol">(</a><a id="16598" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="16606" href="blog/sheafs/index.html#3742" class="InductiveConstructor">e12&lt;v1</a><a id="16612" class="Symbol">)</a> <a id="16614" class="Symbol">=</a> <a id="16616" href="blog/sheafs/index.html#6475" class="Function">e12~&gt;v1</a> <a id="16624" class="Symbol">.</a><a data-type="LinMap m n â†’ Vec Int m â†’ Vec Int n" id="16625" href="Category.LIN.html#344" class="Field">linmap</a>
  <a id="16634" href="blog/sheafs/index.html#16498" class="Function">ex&#39;</a> <a id="16638" class="Symbol">.</a><a data-type="(r : C =&gt; D) â†’ C [ A , B ] â†’ D [ F-Obj r A , F-Obj r B ]" id="16639" href="Category.MyFunctor.html#178" class="Field">F-map</a> <a id="16645" class="Symbol">(</a><a id="16646" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="16654" href="blog/sheafs/index.html#3764" class="InductiveConstructor">e12&lt;v2</a><a id="16660" class="Symbol">)</a> <a id="16662" class="Symbol">=</a> <a id="16664" href="blog/sheafs/index.html#6815" class="Function">e12~&gt;v2</a> <a id="16672" class="Symbol">.</a><a data-type="LinMap m n â†’ Vec Int m â†’ Vec Int n" id="16673" href="Category.LIN.html#344" class="Field">linmap</a>
  <a id="16682" href="blog/sheafs/index.html#16498" class="Function">ex&#39;</a> <a id="16686" class="Symbol">.</a><a data-type="(r : C =&gt; D) â†’ C [ A , B ] â†’ D [ F-Obj r A , F-Obj r B ]" id="16687" href="Category.MyFunctor.html#178" class="Field">F-map</a> <a id="16693" class="Symbol">(</a><a id="16694" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="16702" class="Symbol">(</a><a id="16703" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="16712" class="Symbol">_))</a> <a id="16716" href="blog/sheafs/index.html#16716" class="Bound">a</a> <a id="16718" class="Symbol">=</a> <a id="16720" href="blog/sheafs/index.html#16716" class="Bound">a</a>
  <a id="16724" href="blog/sheafs/index.html#16498" class="Function">ex&#39;</a> <a id="16728" class="Symbol">.</a><a data-type="(r : C =&gt; D) (A : Obj C) â†’ D [ F-map r (id C) â‰ˆ id D ]" id="16729" href="Category.MyFunctor.html#245" class="Field">F-map-id</a> <a id="16738" href="blog/sheafs/index.html#16738" class="Bound">A</a> <a id="16740" href="blog/sheafs/index.html#16740" class="Bound">a</a> <a id="16742" class="Symbol">=</a> <a id="16744" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="16751" href="blog/sheafs/index.html#16498" class="Function">ex&#39;</a> <a id="16755" class="Symbol">.</a><a data-type="(r : C =&gt; D) (g : C [ Y , Zâ‚ ]) (f : C [ X , Y ]) â†’
D [ F-map r (C [ g âˆ˜ f ]) â‰ˆ D [ F-map r g âˆ˜ F-map r f ] ]" id="16756" href="Category.MyFunctor.html#354" class="Field">F-map-âˆ˜</a> <a id="16764" class="Symbol">(</a><a id="16765" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="16773" href="blog/sheafs/index.html#3742" class="InductiveConstructor">e12&lt;v1</a><a id="16779" class="Symbol">)</a> <a id="16781" class="Symbol">(</a><a id="16782" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="16790" class="Symbol">(</a><a id="16791" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="16800" class="Symbol">_))</a> <a id="16804" href="blog/sheafs/index.html#16804" class="Bound">a</a> <a id="16806" class="Symbol">=</a> <a id="16808" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="16815" href="blog/sheafs/index.html#16498" class="Function">ex&#39;</a> <a id="16819" class="Symbol">.</a><a data-type="(r : C =&gt; D) (g : C [ Y , Zâ‚ ]) (f : C [ X , Y ]) â†’
D [ F-map r (C [ g âˆ˜ f ]) â‰ˆ D [ F-map r g âˆ˜ F-map r f ] ]" id="16820" href="Category.MyFunctor.html#354" class="Field">F-map-âˆ˜</a> <a id="16828" class="Symbol">(</a><a id="16829" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="16837" href="blog/sheafs/index.html#3764" class="InductiveConstructor">e12&lt;v2</a><a id="16843" class="Symbol">)</a> <a id="16845" class="Symbol">(</a><a id="16846" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="16854" class="Symbol">(</a><a id="16855" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="16864" class="Symbol">_))</a> <a id="16868" href="blog/sheafs/index.html#16868" class="Bound">a</a> <a id="16870" class="Symbol">=</a> <a id="16872" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="16879" href="blog/sheafs/index.html#16498" class="Function">ex&#39;</a> <a id="16883" class="Symbol">.</a><a data-type="(r : C =&gt; D) (g : C [ Y , Zâ‚ ]) (f : C [ X , Y ]) â†’
D [ F-map r (C [ g âˆ˜ f ]) â‰ˆ D [ F-map r g âˆ˜ F-map r f ] ]" id="16884" href="Category.MyFunctor.html#354" class="Field">F-map-âˆ˜</a> <a id="16892" class="Symbol">(</a><a id="16893" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="16901" class="Symbol">(</a><a id="16902" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="16911" class="Symbol">_))</a> <a id="16915" class="Symbol">(</a><a id="16916" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="16924" href="blog/sheafs/index.html#3742" class="InductiveConstructor">e12&lt;v1</a><a id="16930" class="Symbol">)</a> <a id="16932" href="blog/sheafs/index.html#16932" class="Bound">a</a> <a id="16934" class="Symbol">=</a> <a id="16936" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="16943" href="blog/sheafs/index.html#16498" class="Function">ex&#39;</a> <a id="16947" class="Symbol">.</a><a data-type="(r : C =&gt; D) (g : C [ Y , Zâ‚ ]) (f : C [ X , Y ]) â†’
D [ F-map r (C [ g âˆ˜ f ]) â‰ˆ D [ F-map r g âˆ˜ F-map r f ] ]" id="16948" href="Category.MyFunctor.html#354" class="Field">F-map-âˆ˜</a> <a id="16956" class="Symbol">(</a><a id="16957" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="16965" class="Symbol">(</a><a id="16966" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="16975" class="Symbol">_))</a> <a id="16979" class="Symbol">(</a><a id="16980" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="16988" href="blog/sheafs/index.html#3764" class="InductiveConstructor">e12&lt;v2</a><a id="16994" class="Symbol">)</a> <a id="16996" href="blog/sheafs/index.html#16996" class="Bound">a</a> <a id="16998" class="Symbol">=</a> <a id="17000" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="17007" href="blog/sheafs/index.html#16498" class="Function">ex&#39;</a> <a id="17011" class="Symbol">.</a><a data-type="(r : C =&gt; D) (g : C [ Y , Zâ‚ ]) (f : C [ X , Y ]) â†’
D [ F-map r (C [ g âˆ˜ f ]) â‰ˆ D [ F-map r g âˆ˜ F-map r f ] ]" id="17012" href="Category.MyFunctor.html#354" class="Field">F-map-âˆ˜</a> <a id="17020" class="Symbol">(</a><a id="17021" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="17029" class="Symbol">(</a><a id="17030" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="17039" class="Symbol">_))</a> <a id="17043" class="Symbol">(</a><a id="17044" href="blog/sheafs/index.html#15501" class="InductiveConstructor">reverse</a> <a id="17052" class="Symbol">(</a><a id="17053" href="blog/sheafs/index.html#3840" class="InductiveConstructor">ex&lt;-refl</a> <a id="17062" class="Symbol">_))</a> <a id="17066" href="blog/sheafs/index.html#17066" class="Bound">a</a>
    <a id="17072" class="Symbol">=</a> <a id="17074" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre>
<p>which leaves only the question of what a <code>GlobalSection</code> is under this representation.</p>
<p>I got stumped on this one for a while too, but again, Reed to the rescue, who points out that in our preorder, <code>&lt;</code> corresponds to a â€œsmallerâ€ space. Thus, we want to find a mapping out of the biggest space, which corresponds to a top element in the order, or a terminal object in the category. The terminal object is going to be the â€œtotal spaceâ€ in consideration (in our sensor example, eg.) and the functor laws will ensure consistency.</p>
<pre class="Agda"><a id="GlobalSection"></a><a id="17617" href="blog/sheafs/index.html#17617" class="Function">GlobalSection</a>
    <a id="17635" class="Symbol">:</a> <a id="17637" class="Symbol">{</a><a id="17638" href="blog/sheafs/index.html#17638" class="Bound">C</a> <a id="17640" class="Symbol">:</a> <a data-type="Set" id="17642" href="Categories.html#257" class="Record">Category</a><a id="17650" class="Symbol">}</a>
    <a id="17656" class="Symbol">â†’</a> <a id="17658" class="Symbol">(</a><a id="17659" href="blog/sheafs/index.html#17659" class="Bound">pre</a> <a id="17663" class="Symbol">:</a> <a id="17665" href="blog/sheafs/index.html#16259" class="Function">Presheaf</a> <a id="17674" href="blog/sheafs/index.html#17638" class="Bound">C</a><a id="17675" class="Symbol">)</a>
    <a id="17681" class="Symbol">â†’</a> <a id="17683" class="Symbol">(</a><a id="17684" href="blog/sheafs/index.html#17684" class="Bound">t</a> <a id="17686" class="Symbol">:</a> <a data-type="(C : Category) â†’ Set" id="17688" href="Categories.html#2671" class="Record">HasTerminal</a> <a id="17700" href="blog/sheafs/index.html#17638" class="Bound">C</a><a id="17701" class="Symbol">)</a>
    <a id="17707" class="Symbol">â†’</a> <a data-type="Setâ‚" id="17709" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="17713" href="blog/sheafs/index.html#17617" class="Function">GlobalSection</a> <a id="17727" href="blog/sheafs/index.html#17727" class="Bound">pre</a> <a id="17731" href="blog/sheafs/index.html#17731" class="Bound">t</a> <a id="17733" class="Symbol">=</a>
  <a id="17737" href="blog/sheafs/index.html#17727" class="Bound">pre</a> <a id="17741" class="Symbol">.</a><a data-type="C =&gt; D â†’ Obj C â†’ Obj D" id="17742" href="Category.MyFunctor.html#152" class="Field">_=&gt;_.F-Obj</a> <a id="17753" class="Symbol">(</a><a id="17754" href="blog/sheafs/index.html#17731" class="Bound">t</a> <a id="17756" class="Symbol">.</a><a data-type="HasTerminal C â†’ Obj C" id="17757" href="Categories.html#2711" class="Field">HasTerminal.terminal</a><a id="17777" class="Symbol">)</a>
</pre>
<p>Unfortunately, this is a problem for our worked example â€” we donâ€™t <em>have</em> a terminal object! But thatâ€™s OK, itâ€™s easy to trivially construct one by just adding a top:</p>
<div class="diagram-container">
<img src="a653552eb5e4b4f16d6c852c2162bdb0805104fd.svg" title="commutative diagram" class="diagram quiver" />
</div>
<p>and by picking an object in <span class="Agda"><a data-type="Category" href="Category.SET.html#216" class="Function">SET</a></span> to map it to for our presheaf. There are some interesting choices here; we could just pick <span class="Agda"><a data-type="Set" href="Agda.Builtin.Unit.html#164" class="Record">âŠ¤</a></span>, which is interesting in how boring a choice it is. Such a thing trivially satisfies all of the requirements, but it doesnâ€™t tell us much about the world. This is the metaphorical equivalent of explaining our sensorsâ€™ readings as â€œanything is possible!â€</p>
<p>More interestingly, we could pick <code>F-Obj terminal</code> to be <span style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">Z</mi><mn>2</mn></msup><mo>Ã—</mo><msup><mi mathvariant="double-struck">Z</mi><mn>3</mn></msup><mo>Ã—</mo><msup><mi mathvariant="double-struck">Z</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\mathbb{Z}^2 Ã— \mathbb{Z}^3 Ã— \mathbb{Z}^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathbb">Z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathbb">Z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">Z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>,</span> corresponding to the product of <code>F-Obj v1</code>, <code>F-Obj v2</code> and <code>F-Obj e12</code>. We can satisfy the functor laws by projecting from the <code>F-Obj term</code> down to one of its components. And, best of all, it gives us a place to stick the values from our worked example.</p>
<p>Iâ€™d love to code this up in more detail, but unfortunately Iâ€™m out of time. Thatâ€™s the flaw of trying to get through one paper a week, the deadline is strict whether youâ€™re ready for it or not.</p>
<p>This whole post is a literate Agda file.</p>

<p class="meta">
</p>

</div>

<div class="comments">
  <script src="https://utteranc.es/client.js" repo="isovector/reasonablypolymorphic.com" issue-term="pathname" theme="github-light" crossorigin="anonymous" async>
  </script>
</div>
</article>

</div>
    <nav>
        <h1><a href="/">REASONABLY<br />POLYMORPHIC</a></h1>
    
        <p> Hi there. I&#39;m <strong>Sandy Maguire</strong>. I like improving life and
        making cool things.</p>
    
        <p>If you want to get in touch, I&#39;d love to hear from you! Send me an
        email; you can contact me via <tt><b>sandy</b></tt> at <tt><b>sandymaguire.me</b></tt>.</p>
    
        <h2>SITE LINKS</h2>
        <ul>
            <li><a href="/">Archives</a></li>
            <li><a href="/talks">Talks</a></li>
        </ul>
    
        <h2>THINGS I MAKE</h2>
        <ul>
            <li>Code on <a href="http://github.com/isovector">github</a></li>
            <li>Book <a href="/book/preface.html">archive</a></li>
            <li>My other <a href="http://sandymaguire.me">blog</a></li>
        </ul>
    
        <h2>WHAT I&#39;M DOING</h2>
        <ul>
            <!-- <li><a href="/erdos">Erdos Project</a></li> -->
            <li>Music at <a href="http://last.fm/user/Paamayim">last.fm</a></li>
            <li>Books at <a href="https://www.goodreads.com/review/list/14945161-sandy-maguire?shelf=currently-reading">goodreads</a></li>
            <!-- <li>Papers at <a href="https://www.mendeley.com/groups/7295141/read/papers/">mendeley</a></li> -->
        </ul>
    
        <p>
        Â© 2015-2023 Sandy Maguire
        </p>
    </nav>

    <!--
    <div id="smallnav">
      <div class="smallhome"><a href="/">REASONABLY POLYMORPHIC</a></div>
      <div class="smallarchives"><a href="/blog/archives/">ARCHIVES</a></div>
    </div>
    -->
</body>
</html>

